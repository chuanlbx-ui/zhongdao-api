# ä¸­é“å•†åŸä¾›åº”é“¾é‡‡è´­è·¯å¾„ä¼˜åŒ–ç³»ç»Ÿ

è¿™æ˜¯ä¸€ä¸ªå¤æ‚çš„æŠ€æœ¯æ¶æ„æ ¸å¿ƒï¼Œå®ç°äº†å¤šå±‚çº§ä¾›åº”é“¾çš„æ™ºèƒ½è·¯å¾„æŸ¥æ‰¾å’Œä¼˜åŒ–ã€‚ç³»ç»ŸåŸºäºç­‰çº§é™åˆ¶çš„é‡‡è´­é“¾è·¯æ™ºèƒ½æŸ¥æ‰¾ï¼Œæ”¯æŒæœ€ä¼˜ä»·æ ¼è·¯å¾„ã€åº“å­˜å……è¶³æ£€æŸ¥ã€å¤šä¸ªå¯é€‰ä¾›åº”å•†ã€‚

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### 1. å¤šå±‚çº§ä¾›åº”é“¾å»ºæ¨¡
- **å›¾æ•°æ®ç»“æ„**ï¼šä½¿ç”¨é‚»æ¥çŸ©é˜µå’ŒèŠ‚ç‚¹æ˜ å°„æ„å»ºé«˜æ•ˆçš„ç½‘ç»œå›¾
- **å®æ—¶æ›´æ–°**ï¼šæ”¯æŒå¢é‡æ›´æ–°å’Œè‡ªåŠ¨é‡å»º
- **æ•°æ®éªŒè¯**ï¼šå¾ªç¯å¼•ç”¨æ£€æµ‹ã€æ•°æ®å®Œæ•´æ€§éªŒè¯
- **æ€§èƒ½ç›‘æ§**ï¼šæ‰§è¡Œæ—¶é—´ã€å†…å­˜ä½¿ç”¨ã€ç¼“å­˜å‘½ä¸­ç‡ç»Ÿè®¡

### 2. æ™ºèƒ½è·¯å¾„æœç´¢ç®—æ³•
- **BFSå¹¿åº¦ä¼˜å…ˆæœç´¢**ï¼šé€‚åˆå¯»æ‰¾æœ€çŸ­è·¯å¾„
- **DFSæ·±åº¦ä¼˜å…ˆæœç´¢**ï¼šé€‚åˆæ·±åº¦æ¢ç´¢è·¯å¾„
- **Dijkstraç®—æ³•**ï¼šåŸºäºæƒé‡çš„æœ€çŸ­è·¯å¾„
- **A*å¯å‘å¼æœç´¢**ï¼šæ™ºèƒ½å¼•å¯¼çš„è·¯å¾„æœç´¢

### 3. å¤šç›®æ ‡ä¼˜åŒ–ç®—æ³•
- **ä»·æ ¼ä¼˜å…ˆ**ï¼šæ‰¾åˆ°æœ€ä½é‡‡è´­ä»·æ ¼
- **åº“å­˜ä¼˜å…ˆ**ï¼šç¡®ä¿ä¾›åº”å•†æœ‰è¶³å¤Ÿåº“å­˜
- **è·¯å¾„æœ€çŸ­**ï¼šå‡å°‘ä¸­é—´ç¯èŠ‚ï¼Œæé«˜æ•ˆç‡
- **å¯é æ€§ä¼˜å…ˆ**ï¼šé€‰æ‹©é«˜å¯é æ€§ä¾›åº”å•†
- **å¹³è¡¡ä¼˜åŒ–**ï¼šç»¼åˆè€ƒè™‘å¤šä¸ªå› ç´ 
- **é—ä¼ ç®—æ³•**ï¼šé«˜çº§å¤šç›®æ ‡ä¼˜åŒ–

### 4. é«˜æ€§èƒ½ç¼“å­˜ç³»ç»Ÿ
- **å¤šå±‚ç¼“å­˜**ï¼šè·¯å¾„ç¼“å­˜ã€ä»·æ ¼ç¼“å­˜ã€åº“å­˜ç¼“å­˜
- **å¤šç§ç­–ç•¥**ï¼šLRUã€LFUã€TTLã€SIZE_BASED
- **æ™ºèƒ½ç®¡ç†**ï¼šè‡ªåŠ¨æ¸…ç†ã€å†…å­˜ç›‘æ§ã€ç´§æ€¥å›æ”¶
- **æ‰¹é‡æ“ä½œ**ï¼šæ‰¹é‡è®¾ç½®ã€æ‰¹é‡è·å–ã€é¢„çƒ­åŠŸèƒ½

### 5. ä¸šåŠ¡è§„åˆ™éªŒè¯
- **ç­‰çº§é™åˆ¶**ï¼šåªèƒ½å‘æ›´é«˜çº§åˆ«çš„ä¸Šçº§è¿›è´§
- **å›¢é˜Ÿå…³ç³»**ï¼šå¿…é¡»åœ¨åŒä¸€å›¢é˜Ÿå†…æ‰èƒ½é‡‡è´­
- **åº“å­˜æ£€æŸ¥**ï¼šç¡®ä¿ä¾›åº”å•†åº“å­˜å……è¶³
- **ä»·æ ¼éªŒè¯**ï¼šåŸºäºç”¨æˆ·ç­‰çº§çš„å·®å¼‚åŒ–å®šä»·

## ğŸ“Š ä¸šåŠ¡åœºæ™¯

### ä¾›åº”é“¾å±‚çº§ç»“æ„
```
è‘£äº‹ â†’ äº”æ˜Ÿåº—é•¿ â†’ å››æ˜Ÿåº—é•¿ â†’ ä¸‰æ˜Ÿåº—é•¿ â†’ äºŒæ˜Ÿåº—é•¿ â†’ ä¸€æ˜Ÿåº—é•¿ â†’ VIP/æ™®é€š
```

### æ ¸å¿ƒä¸šåŠ¡è§„åˆ™
1. **é‡‡è´­æƒé™**ï¼šåªèƒ½å‘æ›´é«˜çº§åˆ«ä¸”éå¹³çº§çš„ä¸Šçº§è¿›è´§
2. **å¹³çº§å¤„ç†**ï¼šå¦‚æœä¸Šçº§ä¸è‡ªå·±å¹³çº§ï¼Œéœ€è¦å†å¾€ä¸Šæ‰¾æ›´é«˜ç­‰çº§
3. **ä¸šç»©åˆ†é…**ï¼šé‡‡è´­é“¾è·¯ä¸­æ‰€æœ‰ä¸­é—´äººéƒ½ç®—ä¸šç»©
4. **åº“å­˜ä¿éšœ**ï¼šä¾›åº”å•†åº“å­˜å¿…é¡»å……è¶³
5. **ä»·æ ¼ä¼˜åŒ–**ï¼šåŸºäºç”¨æˆ·ç­‰çº§çš„å·®å¼‚åŒ–å®šä»·

## ğŸ”§ å¿«é€Ÿå¼€å§‹

### åŸºç¡€ä½¿ç”¨

```typescript
import { supplyChainOptimizer, supplyChainIntegrationService } from './index';

// 1. æ™ºèƒ½é‡‡è´­ï¼ˆè‡ªåŠ¨å¯»æ‰¾æœ€ä¼˜è·¯å¾„ï¼‰
const result = await supplyChainIntegrationService.intelligentPurchase({
  buyerId: 'user_123',
  productId: 'product_456',
  quantity: 10
});

if (result.success) {
  console.log('é‡‡è´­æˆåŠŸ:', result.order);
  console.log('æœ€ä¼˜è·¯å¾„:', result.path);
} else {
  console.log('é‡‡è´­å¤±è´¥:', result.error);
}

// 2. æŸ¥æ‰¾æœ€ä¼˜è·¯å¾„
const path = await supplyChainOptimizer.findOptimalPath(
  'user_123',
  'product_456',
  10,
  {
    strategy: 'BALANCED', // ä»·æ ¼ã€åº“å­˜ã€é•¿åº¦ã€å¯é æ€§å¹³è¡¡
    weights: {
      price: 0.4,      // ä»·æ ¼æƒé‡
      inventory: 0.3,  // åº“å­˜æƒé‡
      length: 0.2,     // è·¯å¾„é•¿åº¦æƒé‡
      reliability: 0.1 // å¯é æ€§æƒé‡
    }
  }
);

// 3. è·å–å¤šä¸ªé‡‡è´­å»ºè®®
const suggestions = await supplyChainIntegrationService.getPurchaseSuggestions(
  'user_123',
  'product_456',
  10,
  5 // æœ€å¤š5ä¸ªå»ºè®®
);

console.log('é‡‡è´­å»ºè®®:', suggestions.suggestions);

// 4. æ¨¡æ‹Ÿé‡‡è´­å½±å“
const impact = await supplyChainIntegrationService.simulatePurchaseImpact(
  'user_123',
  'product_456',
  10
);

console.log('é‡‡è´­å½±å“åˆ†æ:', impact);
```

### æ‰¹é‡å¤„ç†

```typescript
// æ‰¹é‡æ™ºèƒ½é‡‡è´­
const requests = [
  { buyerId: 'user_1', productId: 'product_1', quantity: 5 },
  { buyerId: 'user_2', productId: 'product_2', quantity: 8 },
  { buyerId: 'user_3', productId: 'product_3', quantity: 3 }
];

const batchResults = await supplyChainIntegrationService.batchIntelligentPurchase(requests);

console.log(`æˆåŠŸ: ${batchResults.filter(r => r.success).length}/${requests.length}`);
```

### é«˜çº§é…ç½®

```typescript
import { supplyChainOptimizer } from './index';

// è‡ªå®šä¹‰ä¼˜åŒ–ç­–ç•¥
const path = await supplyChainOptimizer.findOptimalPath(
  'buyer_id',
  'product_id',
  quantity,
  {
    strategy: 'PRICE_FIRST', // ä»·æ ¼ä¼˜å…ˆ
    maxPaths: 20,
    useCache: true
  }
);

// è·å–ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡
const metrics = supplyChainOptimizer.getPerformanceMetrics();
console.log('ç³»ç»Ÿæ€§èƒ½:', metrics);

// ç³»ç»Ÿå¥åº·æ£€æŸ¥
const health = await supplyChainOptimizer.healthCheck();
console.log('ç³»ç»Ÿå¥åº·:', health);
```

## ğŸ¯ ä¼˜åŒ–ç­–ç•¥è¯¦è§£

### 1. PRICE_FIRSTï¼ˆä»·æ ¼ä¼˜å…ˆï¼‰
```typescript
const result = await supplyChainOptimizer.findOptimalPath(
  buyerId, productId, quantity,
  { strategy: 'PRICE_FIRST' }
);
```
- **é€‚ç”¨åœºæ™¯**ï¼šæˆæœ¬æ•æ„Ÿå‹é‡‡è´­
- **æƒé‡åˆ†å¸ƒ**ï¼šä»·æ ¼ 60%ï¼Œå…¶ä»– 40%

### 2. INVENTORY_FIRSTï¼ˆåº“å­˜ä¼˜å…ˆï¼‰
```typescript
const result = await supplyChainOptimizer.findOptimalPath(
  buyerId, productId, quantity,
  { strategy: 'INVENTORY_FIRST' }
);
```
- **é€‚ç”¨åœºæ™¯**ï¼šå¤§æ‰¹é‡é‡‡è´­ï¼Œåº“å­˜ä¿éšœä¼˜å…ˆ
- **æƒé‡åˆ†å¸ƒ**ï¼šåº“å­˜ 60%ï¼Œå…¶ä»– 40%

### 3. RELIABILITY_FIRSTï¼ˆå¯é æ€§ä¼˜å…ˆï¼‰
```typescript
const result = await supplyChainOptimizer.findOptimalPath(
  buyerId, productId, quantity,
  { strategy: 'RELIABILITY_FIRST' }
);
```
- **é€‚ç”¨åœºæ™¯**ï¼šé‡è¦å•†å“ï¼Œä¾›åº”å•†ç¨³å®šæ€§è¦æ±‚é«˜
- **æƒé‡åˆ†å¸ƒ**ï¼šå¯é æ€§ 55%ï¼Œå…¶ä»– 45%

### 4. CUSTOMï¼ˆè‡ªå®šä¹‰æƒé‡ï¼‰
```typescript
const result = await supplyChainOptimizer.findOptimalPath(
  buyerId, productId, quantity,
  {
    strategy: 'CUSTOM',
    weights: {
      price: 0.5,      // 50% ä»·æ ¼æƒé‡
      inventory: 0.2,  // 20% åº“å­˜æƒé‡
      length: 0.15,    // 15% è·¯å¾„é•¿åº¦æƒé‡
      reliability: 0.15 // 15% å¯é æ€§æƒé‡
    }
  }
);
```

## ğŸ“ˆ æ€§èƒ½ç‰¹æ€§

### æ—¶é—´å¤æ‚åº¦
- **è·¯å¾„æœç´¢**ï¼šO(b^d)ï¼Œå…¶ä¸­bæ˜¯åˆ†æ”¯å› å­ï¼Œdæ˜¯æœç´¢æ·±åº¦
- **å¤šç›®æ ‡ä¼˜åŒ–**ï¼šO(n log n)ï¼Œå…¶ä¸­næ˜¯è·¯å¾„æ•°é‡
- **ç¼“å­˜æŸ¥è¯¢**ï¼šO(1)ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦

### ç©ºé—´å¤æ‚åº¦
- **é‚»æ¥çŸ©é˜µ**ï¼šO(nÂ²)ï¼Œå…¶ä¸­næ˜¯ä¾›åº”é“¾èŠ‚ç‚¹æ•°
- **ç¼“å­˜å­˜å‚¨**ï¼šå¯é…ç½®ï¼Œé»˜è®¤100MBé™åˆ¶
- **è·¯å¾„å­˜å‚¨**ï¼šO(m)ï¼Œå…¶ä¸­mæ˜¯è·¯å¾„æ•°é‡

### æ€§èƒ½ç›®æ ‡
- **å®æ—¶æŸ¥è¯¢**ï¼šå•æ¬¡è·¯å¾„æŸ¥è¯¢ < 100ms
- **æ‰¹é‡è®¡ç®—**ï¼š100ä¸ªè·¯å¾„æŸ¥è¯¢ < 5s
- **å†…å­˜ä½¿ç”¨**ï¼š< 100MBï¼ˆå¯é…ç½®ï¼‰
- **ç¼“å­˜å‘½ä¸­ç‡**ï¼š> 80%

## ğŸ” ç›‘æ§å’Œè°ƒè¯•

### æ€§èƒ½ç›‘æ§

```typescript
// è·å–è¯¦ç»†æ€§èƒ½æŒ‡æ ‡
const metrics = supplyChainOptimizer.getPerformanceMetrics();
console.log('ç½‘ç»œæ„å»ºå™¨æ€§èƒ½:', metrics.networkBuilder);
console.log('è·¯å¾„æŸ¥æ‰¾å™¨æ€§èƒ½:', metrics.pathFinder);
console.log('è·¯å¾„ä¼˜åŒ–å™¨æ€§èƒ½:', metrics.pathOptimizer);

// ç¼“å­˜ç»Ÿè®¡
const cacheStats = supplyChainOptimizer.getPerformanceMetrics().cache;
console.log('ç¼“å­˜ç»Ÿè®¡:', cacheStats);
```

### äº‹ä»¶ç›‘å¬

```typescript
import { SupplyChainEventType } from './types';

// ç›‘å¬è·¯å¾„å‘ç°äº‹ä»¶
supplyChainOptimizer.addEventListener(
  SupplyChainEventType.PATH_FOUND,
  (event) => {
    console.log('å‘ç°æ–°è·¯å¾„:', event.data);
  }
);

// ç›‘å¬æ€§èƒ½è­¦å‘Š
supplyChainOptimizer.addEventListener(
  SupplyChainEventType.PERFORMANCE_WARNING,
  (event) => {
    console.warn('æ€§èƒ½è­¦å‘Š:', event.data);
  }
);
```

### å¥åº·æ£€æŸ¥

```typescript
const health = await supplyChainOptimizer.healthCheck();
if (!health.healthy) {
  console.log('ç³»ç»Ÿé—®é¢˜:');
  Object.entries(health.components).forEach(([name, component]) => {
    if (!component.healthy) {
      console.log(`${name}: ${component.issues.join(', ')}`);
    }
  });
}
```

## ğŸ› ï¸ é«˜çº§åŠŸèƒ½

### 1. ç¼“å­˜é¢„çƒ­

```typescript
// é¢„çƒ­çƒ­é—¨å•†å“å’Œæ´»è·ƒä¹°å®¶
await supplyChainOptimizer.warmupCache(
  ['popular_product_1', 'popular_product_2'], // çƒ­é—¨å•†å“
  ['active_buyer_1', 'active_buyer_2']        // æ´»è·ƒä¹°å®¶
);
```

### 2. ç½‘ç»œå¢é‡æ›´æ–°

```typescript
// å½“ç”¨æˆ·ä¿¡æ¯å˜æ›´æ—¶ï¼Œå¢é‡æ›´æ–°ç½‘ç»œ
await supplyChainOptimizer.updateNetwork([
  'updated_user_1',
  'updated_user_2'
]);
```

### 3. è‡ªå®šä¹‰ä¸šåŠ¡è§„åˆ™

```typescript
// åœ¨åˆ›å»ºé‡‡è´­è®¢å•æ—¶ï¼Œåº”ç”¨è‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘
const result = await supplyChainIntegrationService.intelligentPurchase({
  buyerId: 'buyer_123',
  productId: 'product_456',
  quantity: 10,
  preferredSellerId: 'preferred_seller_789', // åå¥½ä¾›åº”å•†
  customWeights: { // è‡ªå®šä¹‰æƒé‡
    price: 0.3,
    inventory: 0.4,
    length: 0.2,
    reliability: 0.1
  }
});
```

## ğŸš¨ é”™è¯¯å¤„ç†

### å¸¸è§é”™è¯¯ç±»å‹

```typescript
import { SupplyChainErrorType } from './types';

try {
  const path = await supplyChainOptimizer.findOptimalPath(buyerId, productId, quantity);
} catch (error) {
  if (error instanceof SupplyChainError) {
    switch (error.type) {
      case SupplyChainErrorType.PATH_NOT_FOUND:
        console.log('æœªæ‰¾åˆ°é‡‡è´­è·¯å¾„');
        break;
      case SupplyChainErrorType.INSUFFICIENT_STOCK:
        console.log('åº“å­˜ä¸è¶³');
        break;
      case SupplyChainErrorType.PERMISSION_DENIED:
        console.log('é‡‡è´­æƒé™ä¸è¶³');
        break;
      case SupplyChainErrorType.NETWORK_NOT_BUILT:
        console.log('ä¾›åº”é“¾ç½‘ç»œæœªæ„å»º');
        break;
    }
  }
}
```

## ğŸ“ æœ€ä½³å®è·µ

### 1. ç³»ç»Ÿåˆå§‹åŒ–
```typescript
// åœ¨åº”ç”¨å¯åŠ¨æ—¶åˆå§‹åŒ–ç³»ç»Ÿ
await supplyChainOptimizer.findOptimalPath('test_user', 'test_product', 1);
```

### 2. é”™è¯¯æ¢å¤
```typescript
// ç½‘ç»œæ›´æ–°å¤±è´¥æ—¶çš„æ¢å¤ç­–ç•¥
try {
  await supplyChainOptimizer.updateNetwork(userIds);
} catch (error) {
  // å¢é‡æ›´æ–°å¤±è´¥ï¼Œæ‰§è¡Œå®Œæ•´é‡å»º
  await networkBuilderService.buildSupplyChainGraph(true);
}
```

### 3. æ€§èƒ½ä¼˜åŒ–
```typescript
// å¯¹äºé¢‘ç¹æŸ¥è¯¢çš„å•†å“ï¼Œå¯ç”¨ç¼“å­˜
const path = await supplyChainOptimizer.findOptimalPath(
  buyerId, productId, quantity,
  { useCache: true }
);

// å¯¹äºä¸å¸¸ç”¨çš„æŸ¥è¯¢ï¼Œå¯ä»¥è·³è¿‡ç¼“å­˜
const path = await supplyChainOptimizer.findOptimalPath(
  buyerId, productId, quantity,
  { useCache: false }
);
```

## ğŸ”§ é…ç½®é€‰é¡¹

```typescript
const config = {
  defaultAlgorithm: 'genetic_algorithm_optimization',
  maxSearchDepth: 10,
  maxPaths: 20,
  defaultWeights: {
    price: 0.35,
    inventory: 0.25,
    length: 0.20,
    reliability: 0.15,
    speed: 0.05
  },
  cache: {
    maxSize: 10000,
    maxMemory: 100 * 1024 * 1024, // 100MB
    defaultTtl: 300000, // 5åˆ†é’Ÿ
    evictionPolicy: 'LRU'
  },
  performance: {
    enableMonitoring: true,
    maxExecutionTime: 10000,
    batchSize: 100
  }
};

const optimizer = new SupplyChainPathOptimizer(config);
```

## ğŸ“š API å‚è€ƒ

è¯¦ç»†APIæ–‡æ¡£è¯·å‚è€ƒç±»å‹å®šä¹‰æ–‡ä»¶ `types.ts`ï¼ŒåŒ…å«æ‰€æœ‰æ¥å£ã€æšä¸¾å’Œç±»çš„å®Œæ•´å®šä¹‰ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤é—®é¢˜æŠ¥å‘Šå’ŒåŠŸèƒ½è¯·æ±‚ã€‚åœ¨æäº¤ä»£ç ä¹‹å‰ï¼Œè¯·ç¡®ä¿ï¼š

1. ä»£ç ç¬¦åˆç°æœ‰é£æ ¼
2. æ·»åŠ é€‚å½“çš„æµ‹è¯•
3. æ›´æ–°ç›¸å…³æ–‡æ¡£
4. é€šè¿‡æ‰€æœ‰æ€§èƒ½æµ‹è¯•

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚