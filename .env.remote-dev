# 中道商城系统 - 远程开发环境配置
# 此配置用于本地开发连接到远程服务器上的开发数据库
# 通过SSH隧道安全连接，不会暴露数据库密码

# ===========================================
# 基础配置
# ===========================================
NODE_ENV=development
PORT=3000
DEBUG=true

# ===========================================
# 数据库配置（通过SSH隧道访问远程开发DB）
# ===========================================
# 使用SSH隧道：ssh -L 3307:localhost:3306 root@162.14.114.224
# 然后本地连接 localhost:3307

DATABASE_URL="mysql://dev_user:dev_password_secure@localhost:3307/zhongdao_mall_dev?connection_limit=20"

DB_HOST=localhost
DB_PORT=3307
DB_USER=dev_user
DB_PASSWORD=dev_password_secure
DB_NAME=zhongdao_mall_dev

# 数据库连接池配置
DB_CONNECTION_LIMIT=20
DB_CONNECTION_TIMEOUT=60000
DB_ACQUIRE_TIMEOUT=60000

# ===========================================
# Redis缓存配置（本地Redis）
# ===========================================
REDIS_URL="redis://localhost:6380"
REDIS_HOST=localhost
REDIS_PORT=6380
REDIS_PASSWORD=
REDIS_DB=1

# Redis连接配置
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_RETRY_ATTEMPTS=3

# ===========================================
# JWT认证配置
# ===========================================
JWT_SECRET=92f7087863c9e280a160ba4c2b5f9acc50925b5e64d8b9834c2a5a72c50e57972558a1d2104ccd54b3107785f47ada0582b158ac2cf23da093cb8a5da05bfb4a
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# JWT算法配置
JWT_ALGORITHM=HS256
JWT_ISSUER=zhongdao-mall-dev
JWT_AUDIENCE=zhongdao-users

# ===========================================
# 微信小程序配置 (中道爱生活)
# ===========================================
WECHAT_APP_ID=wx1ea1b1b0bf6bb19c
WECHAT_APP_SECRET=dd9a1e0b21c0dfb8614071f32bc61ded

# 微信登录配置
WECHAT_LOGIN_TIMEOUT=30000
WECHAT_TOKEN_EXPIRE=7200

# ===========================================
# 微信支付配置（开发环境使用沙箱）
# ===========================================
WECHAT_MCH_ID=1623525309
WECHAT_KEY=7fK9qR2pY5vX3zW8nB6cD1mH4gJ7sL9kT

# 微信支付API v3配置 (沙箱环境)
WECHAT_API_V3_KEY=zhongdao_mall_api_v3_key_32
WECHAT_API_SERIAL_NO=9A2A3A4B5C6D7E8E9A0B1C2D3E4F5A6B7C8D9E0F
WECHAT_API_CLIENT_CERT=
WECHAT_API_CLIENT_KEY=

# 微信支付沙箱模式
WECHAT_SANDBOX=true

# 支付回调URL (本地测试使用 ngrok 或其他内网穿透)
WECHAT_NOTIFY_URL=https://your-domain.com/api/v1/payments/wechat/notify
WECHAT_REFUND_NOTIFY_URL=https://your-domain.com/api/v1/payments/wechat/refund/notify

# API基础URL (用于回调地址)
API_BASE_URL=http://localhost:3000

# ===========================================
# 文件上传配置
# ===========================================
UPLOAD_PATH=./uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx

# ===========================================
# 邮件服务配置
# ===========================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=chuanlbx@gmail.com
SMTP_PASS=simonYC6531))

EMAIL_FROM=noreply@zhongdao-mall.com
EMAIL_FROM_NAME=中道商城

# ===========================================
# 短信服务配置
# ===========================================
# 腾讯云短信
TENCENT_SMS_SECRET_ID=your_secret_id
TENCENT_SMS_SECRET_KEY=your_secret_key
TENCENT_SMS_SDK_APP_ID=your_sdk_app_id
TENCENT_SMS_SIGN_NAME=中道商城

# ===========================================
# 日志配置
# ===========================================
LOG_LEVEL=debug
LOG_FILE=./logs/app-remote-dev.log

LOG_MAX_SIZE=10m
LOG_MAX_FILES=5
LOG_DATE_PATTERN=YYYY-MM-DD

# ===========================================
# 安全配置（开发环境宽松）
# ===========================================
# CORS配置
CORS_ORIGIN=http://localhost:3000,http://localhost:5174,http://localhost:5173
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization

# 限流配置
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000

# ===========================================
# 监控配置
# ===========================================
# 健康检查配置
HEALTH_CHECK_INTERVAL=30000

# 性能监控
ENABLE_PERFORMANCE_MONITORING=true
PERFORMANCE_SAMPLE_RATE=0.5

# 错误监控
ENABLE_ERROR_MONITORING=true

# ===========================================
# 业务配置
# ===========================================
# 佣金配置
COMMISSION_CALCULATION_ENABLED=true
COMMISSION_SETTLEMENT_DAY=1

# 积分配置
POINTS_TRANSFER_ENABLED=true
POINTS_MIN_TRANSFER_AMOUNT=1
POINTS_MAX_TRANSFER_AMOUNT=100000
POINTS_DAILY_TRANSFER_LIMIT=1000000

# 订单配置
ORDER_AUTO_CANCEL_MINUTES=30
ORDER_REFUND_DAYS=7

# 库存配置
INVENTORY_WARNING_THRESHOLD=10
INVENTORY_AUTO_REORDER_ENABLED=false

# ===========================================
# 开发环境专用配置
# ===========================================
# 开发环境特殊配置
ENABLE_CORS=true
ENABLE_SWAGGER=true
ENABLE_MOCK_DATA=false
ENABLE_DEBUG_LOGS=true

# 开发数据库配置 (开发环境可覆盖)
DEV_DB_HOST=localhost
DEV_DB_PORT=3307
DEV_DB_USER=dev_user
DEV_DB_PASSWORD=dev_password_secure
DEV_DB_NAME=zhongdao_mall_dev

# 开发Redis配置
DEV_REDIS_HOST=localhost
DEV_REDIS_PORT=6380
DEV_REDIS_DB=1

# ===========================================
# 远程服务器配置（SSH隧道）
# ===========================================
REMOTE_SERVER_HOST=162.14.114.224
REMOTE_SERVER_USER=root
REMOTE_SERVER_LOCAL_PORT=3307
REMOTE_SERVER_REMOTE_PORT=3306
REMOTE_DB_NAME=zhongdao_mall_dev

# ===========================================
# 数据库备份配置
# ===========================================
# 定期从生产数据库同步脱敏数据到开发数据库
BACKUP_SYNC_ENABLED=true
BACKUP_SYNC_SCHEDULE=0 2 * * *  # 每天凌晨2点
BACKUP_INCLUDE_TABLES=users,products,orders,shops
BACKUP_EXCLUDE_SENSITIVE_FIELDS=password,phone,email,bank_account

# ===========================================
# 环境标识
# ===========================================
ENVIRONMENT_NAME=远程开发环境
ENVIRONMENT_DISPLAY_NAME=Remote Development (Connected to 162.14.114.224)
ENVIRONMENT_COLOR=blue
