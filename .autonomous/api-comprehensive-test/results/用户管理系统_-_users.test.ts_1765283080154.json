{
  "name": "用户管理系统 - users.test.ts",
  "command": "npm test tests/api/users.test.ts",
  "startTime": "2025-12-09T12:20:03.596Z",
  "status": "failed",
  "output": "",
  "error": "Command failed: npm test tests/api/users.test.ts\n\n\u001b[31m⎯⎯⎯⎯⎯⎯\u001b[39m\u001b[1m\u001b[41m Failed Tests 30 \u001b[49m\u001b[22m\u001b[31m⎯⎯⎯⎯⎯⎯⎯\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mGET /users/profile\u001b[2m > \u001b[22m普通用户应该能够获取个人信息\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m105:10\u001b[22m\u001b[39m\n    \u001b[90m103| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/users/profile`\u001b[39m)\n    \u001b[90m104| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer \u001b[39m\u001b[36m${\u001b[39mnormalUserToken\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m105| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m106| \u001b[39m\n    \u001b[90m107| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mGET /users/profile\u001b[2m > \u001b[22mVIP用户应该显示VIP等级标识\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m118:10\u001b[22m\u001b[39m\n    \u001b[90m116| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/users/profile`\u001b[39m)\n    \u001b[90m117| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer \u001b[39m\u001b[36m${\u001b[39mvipUserToken\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m118| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m119| \u001b[39m\n    \u001b[90m120| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mGET /users/profile\u001b[2m > \u001b[22m星店长应该显示店铺管理权限\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m128:10\u001b[22m\u001b[39m\n    \u001b[90m126| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/users/profile`\u001b[39m)\n    \u001b[90m127| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer \u001b[39m\u001b[36m${\u001b[39mstarUserToken\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m128| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m129| \u001b[39m\n    \u001b[90m130| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mGET /users/profile\u001b[2m > \u001b[22m管理员应该显示管理员标识\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m138:10\u001b[22m\u001b[39m\n    \u001b[90m136| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/users/profile`\u001b[39m)\n    \u001b[90m137| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer \u001b[39m\u001b[36m${\u001b[39madminToken\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m138| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m139| \u001b[39m\n    \u001b[90m140| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mPUT /users/profile\u001b[2m > \u001b[22m应该能够更新用户基本信息\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m167:10\u001b[22m\u001b[39m\n    \u001b[90m165| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer \u001b[39m\u001b[36m${\u001b[39mnormalUserToken\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m166| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34msend\u001b[39m(updateData)\n    \u001b[90m167| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m168| \u001b[39m\n    \u001b[90m169| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mGET /users/:id\u001b[2m > \u001b[22m管理员应该能够查看任意用户信息\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m224:10\u001b[22m\u001b[39m\n    \u001b[90m222| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/users/\u001b[39m\u001b[36m${\u001b[39mtestUserId\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m223| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer \u001b[39m\u001b[36m${\u001b[39madminToken\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m224| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m225| \u001b[39m\n    \u001b[90m226| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mGET /users/:id\u001b[2m > \u001b[22m用户应该能够查看自己的信息\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m238:10\u001b[22m\u001b[39m\n    \u001b[90m236| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/users/\u001b[39m\u001b[36m${\u001b[39mcurrentUserId\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m237| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer \u001b[39m\u001b[36m${\u001b[39mnormalUserToken\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m238| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m239| \u001b[39m\n    \u001b[90m240| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mGET /users/:id\u001b[2m > \u001b[22m不存在的用户ID应返回404\n\u001b[31m\u001b[1mError\u001b[22m: expected 404 \"Not Found\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m264:10\u001b[22m\u001b[39m\n    \u001b[90m262| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/users/\u001b[39m\u001b[36m${\u001b[39mfakeId\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m263| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer \u001b[39m\u001b[36m${\u001b[39madminToken\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m264| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m404\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m265| \u001b[39m\n    \u001b[90m266| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mfalse\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mGET /users/team\u001b[2m > \u001b[22m星店长应该能够查看自己的团队\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m275:10\u001b[22m\u001b[39m\n    \u001b[90m273| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/users/team`\u001b[39m)\n    \u001b[90m274| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer \u001b[39m\u001b[36m${\u001b[39mstarUserToken\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m275| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m276| \u001b[39m\n    \u001b[90m277| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mGET /users/team\u001b[2m > \u001b[22m管理员应该能够查看所有团队\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m287:10\u001b[22m\u001b[39m\n    \u001b[90m285| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/users/team`\u001b[39m)\n    \u001b[90m286| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer \u001b[39m\u001b[36m${\u001b[39madminToken\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m287| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m288| \u001b[39m\n    \u001b[90m289| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mGET /users/team\u001b[2m > \u001b[22m团队数据应包含层级关系\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m306:10\u001b[22m\u001b[39m\n    \u001b[90m304| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/users/team`\u001b[39m)\n    \u001b[90m305| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer \u001b[39m\u001b[36m${\u001b[39mstarUserToken\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m306| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m307| \u001b[39m\n    \u001b[90m308| \u001b[39m      if (response.body.data.members && response.body.data.members.len…\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mGET /users/statistics\u001b[2m > \u001b[22m用户应该能够查看个人统计\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m321:10\u001b[22m\u001b[39m\n    \u001b[90m319| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/users/statistics`\u001b[39m)\n    \u001b[90m320| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer \u001b[39m\u001b[36m${\u001b[39mnormalUserToken\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m321| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m322| \u001b[39m\n    \u001b[90m323| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mGET /users/statistics\u001b[2m > \u001b[22m星店长应该有团队业绩统计\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m333:10\u001b[22m\u001b[39m\n    \u001b[90m331| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/users/statistics`\u001b[39m)\n    \u001b[90m332| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer \u001b[39m\u001b[36m${\u001b[39mstarUserToken\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m333| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m334| \u001b[39m\n    \u001b[90m335| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mGET /users/statistics\u001b[2m > \u001b[22m管理员应该有全局统计\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m344:10\u001b[22m\u001b[39m\n    \u001b[90m342| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/users/statistics`\u001b[39m)\n    \u001b[90m343| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer \u001b[39m\u001b[36m${\u001b[39madminToken\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m344| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m345| \u001b[39m\n    \u001b[90m346| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mPOST /users/upload-avatar\u001b[2m > \u001b[22m应该能够上传头像\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mPOST /users/upload-avatar\u001b[2m > \u001b[22m应该验证文件类型\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mPOST /users/upload-avatar\u001b[2m > \u001b[22m未认证用户不能上传头像\n\u001b[31m\u001b[1mError\u001b[22m: Aborted\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.<anonymous> ../node_modules/superagent/lib/request-base.js:\u001b[2m258:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.RequestBase.abort ../node_modules/superagent/lib/request-base.js:\u001b[2m447:8\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m FormData.<anonymous> ../node_modules/superagent/lib/node/index.js:\u001b[2m286:12\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m FormData.CombinedStream._emitError ../node_modules/combined-stream/lib/combined_stream.js:\u001b[2m207:8\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m DelayedStream.<anonymous> ../node_modules/combined-stream/lib/combined_stream.js:\u001b[2m133:10\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m DelayedStream._handleEmit ../node_modules/delayed-stream/lib/delayed_stream.js:\u001b[2m82:15\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ReadStream.source.emit ../node_modules/delayed-stream/lib/delayed_stream.js:\u001b[2m29:19\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mPOST /users/bind-phone\u001b[2m > \u001b[22m应该能够绑定手机号\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m397:5\u001b[22m\u001b[39m\n    \u001b[90m395| \u001b[39m\n    \u001b[90m396| \u001b[39m  \u001b[34mdescribe\u001b[39m(\u001b[32m'POST /users/bind-phone'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m397| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该能够绑定手机号'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m398| \u001b[39m      \u001b[35mconst\u001b[39m phoneData \u001b[33m=\u001b[39m {\n    \u001b[90m399| \u001b[39m        phone\u001b[33m:\u001b[39m \u001b[32m'13800138002'\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mPOST /users/bind-phone\u001b[2m > \u001b[22m应该验证验证码\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m412:5\u001b[22m\u001b[39m\n    \u001b[90m410| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m411| \u001b[39m\n    \u001b[90m412| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该验证验证码'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m413| \u001b[39m      \u001b[35mconst\u001b[39m phoneData \u001b[33m=\u001b[39m {\n    \u001b[90m414| \u001b[39m        phone\u001b[33m:\u001b[39m \u001b[32m'13800138003'\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mPOST /users/bind-phone\u001b[2m > \u001b[22m重复绑定应该返回错误\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m428:5\u001b[22m\u001b[39m\n    \u001b[90m426| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m427| \u001b[39m\n    \u001b[90m428| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'重复绑定应该返回错误'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m429| \u001b[39m      \u001b[90m// 先绑定一次\u001b[39m\n    \u001b[90m430| \u001b[39m      \u001b[35mconst\u001b[39m phoneData \u001b[33m=\u001b[39m {\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mGET /users/referrals\u001b[2m > \u001b[22m用户应该查看自己的推荐记录\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m457:10\u001b[22m\u001b[39m\n    \u001b[90m455| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/users/referrals`\u001b[39m)\n    \u001b[90m456| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer \u001b[39m\u001b[36m${\u001b[39mnormalUserToken\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m457| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m458| \u001b[39m\n    \u001b[90m459| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[19/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mGET /users/referrals\u001b[2m > \u001b[22m管理员应该查看所有推荐记录\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m468:10\u001b[22m\u001b[39m\n    \u001b[90m466| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/users/referrals`\u001b[39m)\n    \u001b[90m467| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer \u001b[39m\u001b[36m${\u001b[39madminToken\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m468| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m469| \u001b[39m\n    \u001b[90m470| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[20/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mGET /users/notifications\u001b[2m > \u001b[22m用户应该能够获取通知列表\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m476:5\u001b[22m\u001b[39m\n    \u001b[90m474| \u001b[39m\n    \u001b[90m475| \u001b[39m  \u001b[34mdescribe\u001b[39m(\u001b[32m'GET /users/notifications'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m476| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'用户应该能够获取通知列表'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m477| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mrequest\u001b[39m(app)\n    \u001b[90m478| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/users/notifications`\u001b[39m)\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[21/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mGET /users/notifications\u001b[2m > \u001b[22m应该支持按已读状态筛选\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m489:5\u001b[22m\u001b[39m\n    \u001b[90m487| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m488| \u001b[39m\n    \u001b[90m489| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该支持按已读状态筛选'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m490| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mrequest\u001b[39m(app)\n    \u001b[90m491| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/users/notifications`\u001b[39m)\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mGET /users/notifications\u001b[2m > \u001b[22m应该支持按通知类型筛选\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m499:5\u001b[22m\u001b[39m\n    \u001b[90m497| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m498| \u001b[39m\n    \u001b[90m499| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该支持按通知类型筛选'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m500| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mrequest\u001b[39m(app)\n    \u001b[90m501| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/users/notifications`\u001b[39m)\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[23/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mPUT /users/notifications/:id/read\u001b[2m > \u001b[22m应该能够标记通知为已读\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m547:10\u001b[22m\u001b[39m\n    \u001b[90m545| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Content-Type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'application/json'\u001b[39m)\n    \u001b[90m546| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34msend\u001b[39m({})\n    \u001b[90m547| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m548| \u001b[39m\n    \u001b[90m549| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[24/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mPUT /users/notifications/:id/read\u001b[2m > \u001b[22m不存在的通知ID应返回404\n\u001b[31m\u001b[1mError\u001b[22m: expected 404 \"Not Found\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m560:10\u001b[22m\u001b[39m\n    \u001b[90m558| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Content-Type'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'application/json'\u001b[39m)\n    \u001b[90m559| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34msend\u001b[39m({})\n    \u001b[90m560| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m404\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m561| \u001b[39m\n    \u001b[90m562| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mfalse\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[25/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mPOST /users/verify-kyc\u001b[2m > \u001b[22m应该能够提交KYC申请\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m567:5\u001b[22m\u001b[39m\n    \u001b[90m565| \u001b[39m\n    \u001b[90m566| \u001b[39m  \u001b[34mdescribe\u001b[39m(\u001b[32m'POST /users/verify-kyc'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m567| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该能够提交KYC申请'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m568| \u001b[39m      \u001b[35mconst\u001b[39m kycData \u001b[33m=\u001b[39m {\n    \u001b[90m569| \u001b[39m        realName\u001b[33m:\u001b[39m \u001b[32m'测试用户'\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[26/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mPOST /users/verify-kyc\u001b[2m > \u001b[22m应该验证必填字段\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m586:5\u001b[22m\u001b[39m\n    \u001b[90m584| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m585| \u001b[39m\n    \u001b[90m586| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该验证必填字段'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m587| \u001b[39m      \u001b[35mconst\u001b[39m kycData \u001b[33m=\u001b[39m {\n    \u001b[90m588| \u001b[39m        realName\u001b[33m:\u001b[39m \u001b[32m''\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[27/30]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m > \u001b[22m用户管理API测试\u001b[2m > \u001b[22mPOST /users/verify-kyc\u001b[2m > \u001b[22m已通过KYC的用户不能重复申请\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/users.test.ts:\u001b[2m604:5\u001b[22m\u001b[39m\n    \u001b[90m602| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m603| \u001b[39m\n    \u001b[90m604| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'已通过KYC的用户不能重复申请'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m605| \u001b[39m      \u001b[90m// 先通过KYC\u001b[39m\n    \u001b[90m606| \u001b[39m      \u001b[35mconst\u001b[39m kycData \u001b[33m=\u001b[39m {\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[28/30]⎯\u001b[22m\u001b[39m\n\n",
  "endTime": "2025-12-09T12:24:40.153Z",
  "duration": 276557
}