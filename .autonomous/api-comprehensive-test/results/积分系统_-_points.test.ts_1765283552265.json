{
  "name": "积分系统 - points.test.ts",
  "command": "npm test tests/api/points.test.ts",
  "startTime": "2025-12-09T12:24:57.306Z",
  "status": "failed",
  "output": "",
  "error": "Command failed: npm test tests/api/points.test.ts\n\n\u001b[31m⎯⎯⎯⎯⎯⎯\u001b[39m\u001b[1m\u001b[41m Failed Tests 18 \u001b[49m\u001b[22m\u001b[31m⎯⎯⎯⎯⎯⎯⎯\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/points.test.ts\u001b[2m > \u001b[22m积分系统API测试\u001b[2m > \u001b[22mGET /points/balance\u001b[2m > \u001b[22m应该能够获取积分余额\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 400 \"Bad Request\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/points.test.ts:\u001b[2m46:10\u001b[22m\u001b[39m\n    \u001b[90m 44| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/points/balance`\u001b[39m)\n    \u001b[90m 45| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer \u001b[39m\u001b[36m${\u001b[39muserToken\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m 46| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m 47| \u001b[39m\n    \u001b[90m 48| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/18]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/points.test.ts\u001b[2m > \u001b[22m积分系统API测试\u001b[2m > \u001b[22mPOST /points/transfer\u001b[2m > \u001b[22m应该能够进行积分转账\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/points.test.ts:\u001b[2m66:5\u001b[22m\u001b[39m\n    \u001b[90m 64| \u001b[39m\n    \u001b[90m 65| \u001b[39m  \u001b[34mdescribe\u001b[39m(\u001b[32m'POST /points/transfer'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m 66| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该能够进行积分转账'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m 67| \u001b[39m      \u001b[35mconst\u001b[39m transferData \u001b[33m=\u001b[39m {\n    \u001b[90m 68| \u001b[39m        toUserId\u001b[33m:\u001b[39m adminUser\u001b[33m.\u001b[39mid\u001b[33m,\u001b[39m \u001b[90m// 使用真实的管理员用户ID\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/18]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/points.test.ts\u001b[2m > \u001b[22m积分系统API测试\u001b[2m > \u001b[22mPOST /points/transfer\u001b[2m > \u001b[22m应该拒绝负金额转账\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/points.test.ts:\u001b[2m86:5\u001b[22m\u001b[39m\n    \u001b[90m 84| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m 85| \u001b[39m\n    \u001b[90m 86| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该拒绝负金额转账'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m 87| \u001b[39m      \u001b[35mconst\u001b[39m transferData \u001b[33m=\u001b[39m {\n    \u001b[90m 88| \u001b[39m        toUserId\u001b[33m:\u001b[39m \u001b[32m'test_recipient_user_12345'\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/18]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/points.test.ts\u001b[2m > \u001b[22m积分系统API测试\u001b[2m > \u001b[22mPOST /points/transfer\u001b[2m > \u001b[22m应该拒绝转账给自己\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/points.test.ts:\u001b[2m103:5\u001b[22m\u001b[39m\n    \u001b[90m101| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m102| \u001b[39m\n    \u001b[90m103| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该拒绝转账给自己'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m104| \u001b[39m      \u001b[35mconst\u001b[39m transferData \u001b[33m=\u001b[39m {\n    \u001b[90m105| \u001b[39m        toUserId\u001b[33m:\u001b[39m testUserId\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/18]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/points.test.ts\u001b[2m > \u001b[22m积分系统API测试\u001b[2m > \u001b[22mPOST /points/transfer\u001b[2m > \u001b[22m应该拒绝余额不足的转账\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/points.test.ts:\u001b[2m119:5\u001b[22m\u001b[39m\n    \u001b[90m117| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m118| \u001b[39m\n    \u001b[90m119| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该拒绝余额不足的转账'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m120| \u001b[39m      \u001b[35mconst\u001b[39m transferData \u001b[33m=\u001b[39m {\n    \u001b[90m121| \u001b[39m        toUserId\u001b[33m:\u001b[39m \u001b[32m'test_recipient_user_12345'\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/18]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/points.test.ts\u001b[2m > \u001b[22m积分系统API测试\u001b[2m > \u001b[22mGET /points/transactions\u001b[2m > \u001b[22m应该能够获取积分流水记录\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/points.test.ts:\u001b[2m138:5\u001b[22m\u001b[39m\n    \u001b[90m136| \u001b[39m\n    \u001b[90m137| \u001b[39m  \u001b[34mdescribe\u001b[39m(\u001b[32m'GET /points/transactions'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m138| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该能够获取积分流水记录'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m139| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mrequest\u001b[39m(app)\n    \u001b[90m140| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/points/transactions`\u001b[39m)\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/18]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/points.test.ts\u001b[2m > \u001b[22m积分系统API测试\u001b[2m > \u001b[22mGET /points/transactions\u001b[2m > \u001b[22m应该能够按交易类型筛选流水记录\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/points.test.ts:\u001b[2m166:5\u001b[22m\u001b[39m\n    \u001b[90m164| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m165| \u001b[39m\n    \u001b[90m166| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该能够按交易类型筛选流水记录'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m167| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mrequest\u001b[39m(app)\n    \u001b[90m168| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/points/transactions`\u001b[39m)\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/18]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/points.test.ts\u001b[2m > \u001b[22m积分系统API测试\u001b[2m > \u001b[22mGET /points/transactions\u001b[2m > \u001b[22m应该能够按时间范围筛选流水记录\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/points.test.ts:\u001b[2m185:5\u001b[22m\u001b[39m\n    \u001b[90m183| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m184| \u001b[39m\n    \u001b[90m185| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该能够按时间范围筛选流水记录'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m186| \u001b[39m      \u001b[35mconst\u001b[39m endDate \u001b[33m=\u001b[39m \u001b[35mnew\u001b[39m \u001b[33mDate\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m187| \u001b[39m      \u001b[35mconst\u001b[39m startDate \u001b[33m=\u001b[39m \u001b[35mnew\u001b[39m \u001b[33mDate\u001b[39m()\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/18]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/points.test.ts\u001b[2m > \u001b[22m积分系统API测试\u001b[2m > \u001b[22mGET /points/statistics\u001b[2m > \u001b[22m应该能够获取积分统计信息\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/points.test.ts:\u001b[2m210:10\u001b[22m\u001b[39m\n    \u001b[90m208| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m`\u001b[39m\u001b[36m${\u001b[39m\u001b[33mAPI_BASE\u001b[39m\u001b[36m}\u001b[39m\u001b[32m/points/statistics`\u001b[39m)\n    \u001b[90m209| \u001b[39m        \u001b[33m.\u001b[39m\u001b[35mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer \u001b[39m\u001b[36m${\u001b[39muserToken\u001b[36m}\u001b[39m\u001b[32m`\u001b[39m)\n    \u001b[90m210| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m211| \u001b[39m\n    \u001b[90m212| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/18]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/points.test.ts\u001b[2m > \u001b[22m积分系统API测试\u001b[2m > \u001b[22mGET /points/statistics\u001b[2m > \u001b[22m应该能够获取指定时间范围的统计\n\u001b[31m\u001b[1mError\u001b[22m: expected 200 \"OK\", got 500 \"Internal Server Error\"\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/points.test.ts:\u001b[2m229:10\u001b[22m\u001b[39m\n    \u001b[90m227| \u001b[39m          period\u001b[33m:\u001b[39m \u001b[32m'month'\u001b[39m \u001b[90m// 最近一个月\u001b[39m\n    \u001b[90m228| \u001b[39m        })\n    \u001b[90m229| \u001b[39m        \u001b[33m.\u001b[39m\u001b[34mexpect\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m         \u001b[31m^\u001b[39m\n    \u001b[90m230| \u001b[39m\n    \u001b[90m231| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertStatus ../node_modules/supertest/lib/test.js:\u001b[2m309:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../node_modules/supertest/lib/test.js:\u001b[2m365:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test._assertFunction ../node_modules/supertest/lib/test.js:\u001b[2m342:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Test.assert ../node_modules/supertest/lib/test.js:\u001b[2m195:23\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m localAssert ../node_modules/supertest/lib/test.js:\u001b[2m138:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Server.<anonymous> ../node_modules/supertest/lib/test.js:\u001b[2m152:11\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/18]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/points.test.ts\u001b[2m > \u001b[22m积分系统API测试\u001b[2m > \u001b[22mPOST /points/recharge (管理员)\u001b[2m > \u001b[22m应该能够为用户充值积分（管理员权限）\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/points.test.ts:\u001b[2m236:5\u001b[22m\u001b[39m\n    \u001b[90m234| \u001b[39m\n    \u001b[90m235| \u001b[39m  \u001b[34mdescribe\u001b[39m(\u001b[32m'POST /points/recharge (管理员)'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m236| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该能够为用户充值积分（管理员权限）'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m237| \u001b[39m      \u001b[35mconst\u001b[39m rechargeData \u001b[33m=\u001b[39m {\n    \u001b[90m238| \u001b[39m        userId\u001b[33m:\u001b[39m testUserId\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/18]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/points.test.ts\u001b[2m > \u001b[22m积分系统API测试\u001b[2m > \u001b[22mPOST /points/recharge (管理员)\u001b[2m > \u001b[22m应该拒绝负数充值\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/points.test.ts:\u001b[2m273:5\u001b[22m\u001b[39m\n    \u001b[90m271| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m272| \u001b[39m\n    \u001b[90m273| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该拒绝负数充值'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m274| \u001b[39m      \u001b[35mconst\u001b[39m rechargeData \u001b[33m=\u001b[39m {\n    \u001b[90m275| \u001b[39m        userId\u001b[33m:\u001b[39m testUserId\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/18]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/points.test.ts\u001b[2m > \u001b[22m积分系统API测试\u001b[2m > \u001b[22mPOST /points/freeze (管理员)\u001b[2m > \u001b[22m应该能够冻结用户积分（管理员权限）\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/points.test.ts:\u001b[2m291:5\u001b[22m\u001b[39m\n    \u001b[90m289| \u001b[39m\n    \u001b[90m290| \u001b[39m  \u001b[34mdescribe\u001b[39m(\u001b[32m'POST /points/freeze (管理员)'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m291| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该能够冻结用户积分（管理员权限）'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m292| \u001b[39m      \u001b[35mconst\u001b[39m freezeData \u001b[33m=\u001b[39m {\n    \u001b[90m293| \u001b[39m        userId\u001b[33m:\u001b[39m testUserId\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/18]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/points.test.ts\u001b[2m > \u001b[22m积分系统API测试\u001b[2m > \u001b[22mPOST /points/freeze (管理员)\u001b[2m > \u001b[22m应该能够解冻用户积分（管理员权限）\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/points.test.ts:\u001b[2m309:5\u001b[22m\u001b[39m\n    \u001b[90m307| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m308| \u001b[39m\n    \u001b[90m309| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该能够解冻用户积分（管理员权限）'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m310| \u001b[39m      \u001b[35mconst\u001b[39m freezeData \u001b[33m=\u001b[39m {\n    \u001b[90m311| \u001b[39m        userId\u001b[33m:\u001b[39m testUserId\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/18]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/points.test.ts\u001b[2m > \u001b[22m积分系统API测试\u001b[2m > \u001b[22mPOST /points/batch-recharge (管理员)\u001b[2m > \u001b[22m应该能够批量充值积分（管理员权限）\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/points.test.ts:\u001b[2m328:5\u001b[22m\u001b[39m\n    \u001b[90m326| \u001b[39m\n    \u001b[90m327| \u001b[39m  \u001b[34mdescribe\u001b[39m(\u001b[32m'POST /points/batch-recharge (管理员)'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m328| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该能够批量充值积分（管理员权限）'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m329| \u001b[39m      \u001b[35mconst\u001b[39m batchRechargeData \u001b[33m=\u001b[39m {\n    \u001b[90m330| \u001b[39m        operations\u001b[33m:\u001b[39m [\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/18]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/points.test.ts\u001b[2m > \u001b[22m积分系统API测试\u001b[2m > \u001b[22mPOST /points/batch-recharge (管理员)\u001b[2m > \u001b[22m应该处理批量充值中的部分失败\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/points.test.ts:\u001b[2m357:5\u001b[22m\u001b[39m\n    \u001b[90m355| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m356| \u001b[39m\n    \u001b[90m357| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该处理批量充值中的部分失败'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m358| \u001b[39m      \u001b[35mconst\u001b[39m batchRechargeData \u001b[33m=\u001b[39m {\n    \u001b[90m359| \u001b[39m        operations\u001b[33m:\u001b[39m [\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/18]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/points.test.ts\u001b[2m > \u001b[22m积分系统API测试\u001b[2m > \u001b[22m积分转账限制和安全测试\u001b[2m > \u001b[22m应该有单日转账金额限制\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/points.test.ts:\u001b[2m386:5\u001b[22m\u001b[39m\n    \u001b[90m384| \u001b[39m\n    \u001b[90m385| \u001b[39m  \u001b[34mdescribe\u001b[39m(\u001b[32m'积分转账限制和安全测试'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m386| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该有单日转账金额限制'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m387| \u001b[39m      \u001b[90m// 测试大额转账是否被限制\u001b[39m\n    \u001b[90m388| \u001b[39m      \u001b[35mconst\u001b[39m largeAmount \u001b[33m=\u001b[39m \u001b[34m50000\u001b[39m\u001b[33m;\u001b[39m \u001b[90m// 假设日限额是10000\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/18]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/points.test.ts\u001b[2m > \u001b[22m积分系统API测试\u001b[2m > \u001b[22m积分转账限制和安全测试\u001b[2m > \u001b[22m应该有转账频率限制\n\u001b[31m\u001b[1mError\u001b[22m: Test timed out in 30000ms.\nIf this is a long-running test, pass a timeout value as the last argument or configure it globally with \"testTimeout\".\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m api/points.test.ts:\u001b[2m407:5\u001b[22m\u001b[39m\n    \u001b[90m405| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m406| \u001b[39m\n    \u001b[90m407| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'应该有转账频率限制'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m    \u001b[31m^\u001b[39m\n    \u001b[90m408| \u001b[39m      \u001b[35mconst\u001b[39m transferData \u001b[33m=\u001b[39m {\n    \u001b[90m409| \u001b[39m        toUserId\u001b[33m:\u001b[39m \u001b[32m'test_recipient_user_12345'\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/18]⎯\u001b[22m\u001b[39m\n\n",
  "endTime": "2025-12-09T12:32:32.265Z",
  "duration": 454959
}