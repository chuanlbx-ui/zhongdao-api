{
  "name": "用户管理系统 - users.test.ts",
  "command": "npm test tests/api/users.test.ts",
  "startTime": "2025-12-09T09:28:12.256Z",
  "status": "failed",
  "output": "",
  "error": "Command failed: npm test tests/api/users.test.ts\n\u001b[2m17:28:15\u001b[22m \u001b[33m\u001b[1m[vite]\u001b[22m\u001b[39m \u001b[33m\u001b[2m(ssr)\u001b[22m\u001b[39m \u001b[33mwarning: \u001b[33mDuplicate member \"updateConfig\" in class body\u001b[33m\n470 |     * 更新配置（扩展版本，支持原因和操作记录）\n471 |     */\n472 |    async updateConfig(key: string, value: any, options?: {\n    |          ^\n473 |      description?: string;\n474 |      category?: string;\n\u001b[39m\n  Plugin: \u001b[35mvite:esbuild\u001b[39m\n  File: \u001b[36mD:/wwwroot/zhongdao-mall/src/modules/config/config.service.ts\u001b[39m\n\u001b[2m17:28:15\u001b[22m \u001b[33m\u001b[1m[vite]\u001b[22m\u001b[39m \u001b[33m\u001b[2m(ssr)\u001b[22m\u001b[39m \u001b[33mwarning: \u001b[33mDuplicate member \"deleteConfig\" in class body\u001b[33m\n547 |     * 删除配置（扩展版本）\n548 |     */\n549 |    async deleteConfig(key: string, deletedBy: string): Promise<void> {\n    |          ^\n550 |      try {\n551 |        await prisma.systemConfigs.delete({\n\u001b[39m\n  Plugin: \u001b[35mvite:esbuild\u001b[39m\n  File: \u001b[36mD:/wwwroot/zhongdao-mall/src/modules/config/config.service.ts\u001b[39m\n\n\u001b[31m⎯⎯⎯⎯⎯⎯\u001b[39m\u001b[1m\u001b[41m Failed Suites 1 \u001b[49m\u001b[22m\u001b[31m⎯⎯⎯⎯⎯⎯⎯\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m api/users.test.ts\u001b[2m [ api/users.test.ts ]\u001b[22m\n\u001b[31m\u001b[1mReferenceError\u001b[22m: asyncHandler is not defined\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m ../src/routes/v1/commission/index.ts:\u001b[2m24:24\u001b[22m\u001b[39m\n    \u001b[90m 22| \u001b[39m * GET /api/v1/commission/summary - 获取佣金汇总\n    \u001b[90m 23| \u001b[39m */\u001b[39m\n    \u001b[90m 24| \u001b[39mrouter.get('/summary', authenticate, asyncHandler(async (req: Request,…\n    \u001b[90m   | \u001b[39m                       \u001b[31m^\u001b[39m\n    \u001b[90m 25| \u001b[39m  \u001b[35mconst\u001b[39m userId \u001b[33m=\u001b[39m req\u001b[33m.\u001b[39muser\u001b[33m!\u001b[39m\u001b[33m.\u001b[39mid\u001b[33m;\u001b[39m\n    \u001b[90m 26| \u001b[39m  \u001b[35mconst\u001b[39m userRole \u001b[33m=\u001b[39m req\u001b[33m.\u001b[39muser\u001b[33m!\u001b[39m\u001b[33m.\u001b[39mrole\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../src/routes/v1/index.ts:\u001b[2m13:1\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m ../src/index.ts:\u001b[2m32:1\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯\u001b[22m\u001b[39m\n\n",
  "endTime": "2025-12-09T09:28:16.496Z",
  "duration": 4240
}