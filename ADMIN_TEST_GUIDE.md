# ä¸­é“å•†åŸç®¡ç†åå°å…¼å®¹æ€§æµ‹è¯•å·¥å…· - å®Œæ•´æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

è¿™æ˜¯ä¸€å¥—å®Œæ•´çš„ç®¡ç†åå°ï¼ˆzhongdao-adminï¼‰ä¸APIå’Œæ•°æ®åº“å…¼å®¹æ€§æµ‹è¯•å·¥å…·ï¼Œç”¨äºéªŒè¯ï¼š

- âœ… API æ¥å£å¯ç”¨æ€§å’Œå…¼å®¹æ€§
- âœ… æ•°æ®åº“è¿æ¥å’Œæ•°æ®ä¸€è‡´æ€§
- âœ… åŠŸèƒ½æ¨¡å—çš„å¯ç”¨æ€§
- âœ… å‰ç«¯ç»„ä»¶çš„å®Œæ•´æ€§

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ 1: ä½¿ç”¨ PowerShellï¼ˆæ¨èï¼‰

```powershell
# Windows PowerShell
.\run-admin-test.ps1

# æˆ–æŒ‡å®šæ¨¡å¼
.\run-admin-test.ps1 -Mode test
.\run-admin-test.ps1 -Mode report
.\run-admin-test.ps1 -Mode api
```

### æ–¹å¼ 2: ä½¿ç”¨ Batch è„šæœ¬

```batch
# Windows Command Prompt
run-admin-test.bat
```

### æ–¹å¼ 3: ç›´æ¥è¿è¡Œ Node.js

```bash
# è¿è¡Œå®Œæ•´æµ‹è¯•
node test-admin-compatibility.js

# è¿è¡Œè¯¦ç»†æµ‹è¯•
node test-admin-compatibility.js --verbose
```

---

## ğŸ“Š æµ‹è¯•é¡¹è¯¦è§£

### 1. API å…¼å®¹æ€§æµ‹è¯•ï¼ˆğŸ“¡ï¼‰

æµ‹è¯•æ‰€æœ‰ç®¡ç†åå°éœ€è¦çš„ API ç«¯ç‚¹ï¼š

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ | è®¤è¯ |
|------|------|------|------|
| `/admin` | GET | API å¥åº·æ£€æŸ¥ | âŒ |
| `/admin/auth/login` | POST | ç®¡ç†å‘˜ç™»å½• | âŒ |
| `/admin/dashboard/stats` | GET | ä»ªè¡¨æ¿ç»Ÿè®¡ | âœ… |
| `/admin/users` | GET | ç”¨æˆ·åˆ—è¡¨ | âœ… |
| `/admin/products` | GET | å•†å“åˆ—è¡¨ | âœ… |
| `/admin/orders` | GET | è®¢å•åˆ—è¡¨ | âœ… |
| `/admin/config/configs` | GET | é…ç½®åˆ—è¡¨ | âœ… |

### 2. æ•°æ®åº“ä¸€è‡´æ€§æ£€æŸ¥ï¼ˆğŸ—„ï¸ï¼‰

éªŒè¯æ•°æ®åº“çš„å…³é”®è¡¨å’Œå­—æ®µï¼š

- **ç”¨æˆ·è¡¨å®Œæ•´æ€§** - æ£€æŸ¥ç”¨æˆ·æ•°æ®è¡¨ç»“æ„
- **å•†å“è¡¨å®Œæ•´æ€§** - æ£€æŸ¥å•†å“æ•°æ®è¡¨ç»“æ„
- **è®¢å•è¡¨å®Œæ•´æ€§** - æ£€æŸ¥è®¢å•æ•°æ®è¡¨ç»“æ„
- **é…ç½®è¡¨å®Œæ•´æ€§** - æ£€æŸ¥ç³»ç»Ÿé…ç½®è¡¨ç»“æ„

### 3. åŠŸèƒ½å¯ç”¨æ€§æµ‹è¯•ï¼ˆâš™ï¸ï¼‰

æµ‹è¯•ç®¡ç†åå°çš„æ ¸å¿ƒåŠŸèƒ½ï¼š

- ç”¨æˆ·åˆ—è¡¨åˆ†é¡µ
- ç”¨æˆ·æœç´¢åŠŸèƒ½
- å•†å“åˆ†ç±»è¿‡æ»¤
- è®¢å•çŠ¶æ€æŸ¥è¯¢
- ä»ªè¡¨æ¿å®æ—¶æ•°æ®

### 4. å‰ç«¯ç»„ä»¶å®Œæ•´æ€§ï¼ˆğŸ¨ï¼‰

æ£€æŸ¥ç®¡ç†åå°å‰ç«¯ç»„ä»¶æ˜¯å¦å­˜åœ¨ï¼š

- Dashboard ç»„ä»¶
- ç”¨æˆ·ç®¡ç†ç»„ä»¶
- å•†å“ç®¡ç†ç»„ä»¶
- è®¢å•ç®¡ç†ç»„ä»¶
- é…ç½®ç®¡ç†ç»„ä»¶

---

## ğŸ”§ å‰ç½®å‡†å¤‡

### 1. å®‰è£… Node.js

```bash
# éªŒè¯ Node.js å®‰è£…
node --version
npm --version
```

è¦æ±‚ï¼šNode.js >= 18.0.0ï¼Œnpm >= 9.0.0

### 2. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd zhongdao-mall
npm install
npm run dev
```

åç«¯åº”è¯¥åœ¨ `http://localhost:3000` è¿è¡Œ

### 3. åˆå§‹åŒ–æ•°æ®åº“

```bash
# è¿è¡Œè¿ç§»
npm run db:migrate

# ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼ˆé€‰æ‹©ä¸€ä¸ªï¼‰
npm run db:seed:minimal       # æœ€å°è§„æ¨¡
npm run db:seed:standard      # æ ‡å‡†è§„æ¨¡ï¼ˆæ¨èï¼‰
npm run db:seed:comprehensive # å®Œæ•´è§„æ¨¡
```

### 4. é…ç½®ç¯å¢ƒå˜é‡

ç¡®ä¿ `.env` æˆ– `.env.local` åŒ…å«ï¼š

```env
# API é…ç½®
API_URL=http://localhost:3000/api/v1
API_TIMEOUT=5000

# æ•°æ®åº“é…ç½®
DATABASE_URL=your_database_url

# ç®¡ç†åå°é…ç½®
ADMIN_URL=http://localhost:5173
```

---

## ğŸ“ˆ æµ‹è¯•æµç¨‹

### æ ‡å‡†æµç¨‹ï¼ˆæ¨èï¼‰

1. **å¯åŠ¨åç«¯æœåŠ¡**
   ```bash
   npm run dev
   ```

2. **ç”Ÿæˆæµ‹è¯•æ•°æ®**
   ```bash
   npm run db:seed:standard
   ```

3. **è¿è¡Œæµ‹è¯•å·¥å…·**
   ```powershell
   .\run-admin-test.ps1
   ```

4. **é€‰æ‹©"å¿«é€Ÿè¯Šæ–­"**
   - è‡ªåŠ¨æ£€æŸ¥ API å’Œæ•°æ®åº“è¿æ¥
   - ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š

5. **æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š**
   - HTML æŠ¥å‘Šåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€
   - JSON æ•°æ®ç”¨äºæ·±åº¦åˆ†æ

### å¿«é€Ÿæµ‹è¯•ï¼ˆä»…æ£€æŸ¥åŸºæœ¬è¿æ¥ï¼‰

```powershell
.\run-admin-test.ps1 -Mode api   # æ£€æŸ¥ API
.\run-admin-test.ps1 -Mode db    # æ£€æŸ¥æ•°æ®åº“
```

### å®Œæ•´æµ‹è¯•ï¼ˆæ‰€æœ‰åŠŸèƒ½ï¼‰

```powershell
.\run-admin-test.ps1 -Mode test  # è¿è¡Œå®Œæ•´æµ‹è¯•
```

---

## ğŸ“„ æµ‹è¯•æŠ¥å‘Š

### HTML æŠ¥å‘Šï¼ˆæ¨èæŸ¥çœ‹ï¼‰

**æ–‡ä»¶**: `admin-test-report.html`

**ç‰¹æ€§**:
- ğŸ“Š äº¤äº’å¼ä»ªè¡¨æ¿
- ğŸ¯ æ•´ä½“è¯„åˆ†å’Œè¿›åº¦æ¡
- ğŸ“‹ è¯¦ç»†çš„æµ‹è¯•é¡¹åˆ—è¡¨
- ğŸ”§ äº¤äº’å¼ä¿®å¤å»ºè®®
- ğŸ’¾ å¯¼å‡ºå’Œä¸‹è½½åŠŸèƒ½

**æ‰“å¼€æ–¹å¼**:
```powershell
.\run-admin-test.ps1 -Mode report
# æˆ–ç›´æ¥æ‰“å¼€æ–‡ä»¶
Start-Process admin-test-report.html
```

### JSON æŠ¥å‘Šï¼ˆæ•°æ®åˆ†æï¼‰

**æ–‡ä»¶**: `admin-test-report-{timestamp}.json`

**å†…å®¹**:
```json
{
  "timestamp": "2025-11-28T10:30:00.000Z",
  "apiTests": [...],
  "databaseTests": [...],
  "functionalTests": [...],
  "componentTests": [...],
  "statistics": {
    "total": 20,
    "passed": 18,
    "failed": 1,
    "warnings": 1
  }
}
```

---

## âš ï¸ å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1: æ— æ³•è¿æ¥åˆ° API

**ç—‡çŠ¶**: æµ‹è¯•æ—¶æç¤º "Cannot connect to API"

**è§£å†³æ­¥éª¤**:
1. æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œ
   ```bash
   npm run dev
   ```

2. éªŒè¯ API åœ°å€
   ```bash
   curl http://localhost:3000/api/v1/admin
   ```

3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
   - å…è®¸ localhost:3000 è®¿é—®

4. æ£€æŸ¥ç¯å¢ƒå˜é‡
   ```env
   API_URL=http://localhost:3000/api/v1
   ```

### é—®é¢˜ 2: æ•°æ®åº“è¿æ¥å¤±è´¥

**ç—‡çŠ¶**: æ•°æ®åº“ä¸€è‡´æ€§æ£€æŸ¥å¤±è´¥

**è§£å†³æ­¥éª¤**:
1. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦è¿è¡Œ
   ```bash
   # ä¾‹å¦‚ MySQL
   mysql -u root -p
   # æˆ– PostgreSQL
   psql -U postgres
   ```

2. è¿è¡Œè¿ç§»
   ```bash
   npm run db:migrate
   ```

3. éªŒè¯è¿æ¥å­—ç¬¦ä¸²
   ```env
   DATABASE_URL=postgresql://user:password@localhost:5432/dbname
   ```

4. æ£€æŸ¥æ•°æ®åº“æƒé™
   ```bash
   npm run db:validate
   ```

### é—®é¢˜ 3: æµ‹è¯•æ•°æ®ä¸å­˜åœ¨

**ç—‡çŠ¶**: åŠŸèƒ½æµ‹è¯•æ—¶æç¤ºæ•°æ®ä¸ºç©º

**è§£å†³æ­¥éª¤**:
1. ç”Ÿæˆæµ‹è¯•æ•°æ®
   ```bash
   npm run db:seed:standard
   ```

2. éªŒè¯æ•°æ®
   ```bash
   npm run db:stats
   ```

3. æ£€æŸ¥è¿ç§»çŠ¶æ€
   ```bash
   npm run db:migrate -- --status
   ```

### é—®é¢˜ 4: å‰ç«¯ç»„ä»¶ç¼ºå¤±

**ç—‡çŠ¶**: ç»„ä»¶å®Œæ•´æ€§æµ‹è¯•è­¦å‘Š

**è§£å†³æ­¥éª¤**:
1. æ£€æŸ¥ç®¡ç†åå°æºç æ˜¯å¦å®Œæ•´
   ```bash
   ls zhongdao-admin/src/pages/
   ls zhongdao-admin/src/components/
   ```

2. é‡æ–°å…‹éš†æˆ–ç¼–è¯‘
   ```bash
   cd zhongdao-admin
   npm install
   npm run build
   ```

3. æ£€æŸ¥æ–‡ä»¶æƒé™
   ```powershell
   Get-ItemProperty zhongdao-admin/src
   ```

---

## ğŸ” æ·±åº¦è¯Šæ–­

### æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

```bash
# åç«¯æ—¥å¿—
tail -f logs/server.log

# æ•°æ®åº“æ—¥å¿—
# MySQL: mysql -u root -p < logs.sql
# PostgreSQL: psql logs

# å‰ç«¯æ„å»ºæ—¥å¿—
npm run build 2>&1 | tee build.log
```

### æ£€æŸ¥ API å“åº”

```bash
# æ£€æŸ¥å•ä¸ªç«¯ç‚¹
curl -X GET http://localhost:3000/api/v1/admin

# å¸¦è®¤è¯æ£€æŸ¥
curl -X GET http://localhost:3000/api/v1/admin/users \
  -H "Authorization: Bearer YOUR_TOKEN"

# æŸ¥çœ‹å“åº”å¤´
curl -i http://localhost:3000/api/v1/admin
```

### éªŒè¯æ•°æ®åº“

```bash
# è¿æ¥æ•°æ®åº“
psql $DATABASE_URL

# æŸ¥çœ‹è¡¨åˆ—è¡¨
\dt

# æŸ¥çœ‹è¡¨ç»“æ„
\d+ users

# æ£€æŸ¥æ•°æ®
SELECT COUNT(*) FROM users;
```

---

## ğŸ“‹ è¯„åˆ†æ ‡å‡†

### æˆåŠŸç‡åˆ’åˆ†

| æˆåŠŸç‡ | è¯„çº§ | è¯´æ˜ |
|--------|------|------|
| 90% - 100% | â­â­â­â­â­ ä¼˜ç§€ | å¯ä»¥å®‰å¿ƒéƒ¨ç½² |
| 75% - 89% | â­â­â­â­ è‰¯å¥½ | å¤§éƒ¨åˆ†åŠŸèƒ½æ­£å¸¸ï¼Œå»ºè®®ä¿®å¤åéƒ¨ç½² |
| 60% - 74% | â­â­â­ ä¸€èˆ¬ | å­˜åœ¨é—®é¢˜ï¼Œéœ€è¦ä¿®å¤ |
| < 60% | â­â­ éœ€è¦æ”¹è¿› | å­˜åœ¨ä¸¥é‡é—®é¢˜ï¼Œä¸å»ºè®®éƒ¨ç½² |

### æµ‹è¯•é¡¹çŠ¶æ€

- âœ… **é€šè¿‡** - åŠŸèƒ½æ­£å¸¸ï¼Œæ— é—®é¢˜
- âŒ **å¤±è´¥** - åŠŸèƒ½å¼‚å¸¸ï¼Œéœ€è¦ä¿®å¤
- âš ï¸ **è­¦å‘Š** - åŠŸèƒ½å¯ç”¨ä½†æœ‰è­¦å‘Šï¼Œå»ºè®®æ£€æŸ¥

---

## ğŸ› ï¸ è‡ªå®šä¹‰æµ‹è¯•

### ä¿®æ”¹æµ‹è¯•ç«¯ç‚¹

ç¼–è¾‘ `test-admin-compatibility.js` ä¸­çš„ `apiEndpoints` æ•°ç»„ï¼š

```javascript
const apiEndpoints = [
  {
    name: 'è‡ªå®šä¹‰æµ‹è¯•åç§°',
    method: 'GET',
    url: 'http://localhost:3000/api/v1/custom-endpoint',
    requireAuth: true
  },
  // ... æ›´å¤šç«¯ç‚¹
];
```

### æ·»åŠ è‡ªå®šä¹‰æµ‹è¯•

```javascript
async function testCustomFeature(runner) {
  // ä½ çš„æµ‹è¯•é€»è¾‘
  runner.addCustomTest({
    name: 'æµ‹è¯•åç§°',
    status: 'pass', // æˆ– 'fail', 'warning'
    message: 'æµ‹è¯•ç»“æœ'
  });
}
```

---

## ğŸ“ æ”¯æŒå’Œåé¦ˆ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ä»¥ä¸‹èµ„æºï¼š

1. **API æ–‡æ¡£**: `http://localhost:3000/api-docs`
2. **é”™è¯¯æ—¥å¿—**: æ£€æŸ¥ `logs/` ç›®å½•
3. **æ•°æ®åº“æ—¥å¿—**: æ£€æŸ¥æ•°æ®åº“æœåŠ¡å™¨æ—¥å¿—
4. **å‰ç«¯æ§åˆ¶å°**: æµè§ˆå™¨å¼€å‘è€…å·¥å…· > Console

---

## ğŸ“š ç›¸å…³æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `test-admin-compatibility.js` | ä¸»æµ‹è¯•è„šæœ¬ |
| `admin-test-report.html` | HTML æµ‹è¯•æŠ¥å‘Š |
| `run-admin-test.ps1` | PowerShell å¯åŠ¨è„šæœ¬ |
| `run-admin-test.bat` | Batch å¯åŠ¨è„šæœ¬ |
| `.env.example` | ç¯å¢ƒå˜é‡ç¤ºä¾‹ |
| `package.json` | é¡¹ç›®é…ç½®å’Œè„šæœ¬ |

---

## ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

- ğŸ”’ ä¸è¦åœ¨å…¬å…±ç½‘ç»œä¸Šè¿è¡Œæµ‹è¯•
- ğŸ”’ ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒæ‰§è¡Œ `db:seed`
- ğŸ”’ ä¿æŠ¤æµ‹è¯•æŠ¥å‘Šä¸­çš„æ•æ„Ÿä¿¡æ¯
- ğŸ”’ å®šæœŸæ›´æ–°ä¾èµ–åŒ…

---

## ğŸ“ˆ ä¸‹ä¸€æ­¥

æµ‹è¯•å®Œæˆåï¼Œå»ºè®®ï¼š

1. âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ â†’ å¯ä»¥éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
2. âš ï¸ éƒ¨åˆ†æµ‹è¯•å¤±è´¥ â†’ æŒ‰ç…§å»ºè®®ä¿®å¤åé‡æ–°æµ‹è¯•
3. âŒ å¤§é‡æµ‹è¯•å¤±è´¥ â†’ æ£€æŸ¥åŸºç¡€è®¾æ–½é…ç½®

---

**æœ€åæ›´æ–°**: 2025-11-28  
**ç‰ˆæœ¬**: 1.0  
**ä½œè€…**: ä¸­é“å•†åŸæŠ€æœ¯å›¢é˜Ÿ

