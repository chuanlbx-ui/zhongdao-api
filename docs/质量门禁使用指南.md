# ä¸­é“å•†åŸä»£ç è´¨é‡é—¨ç¦ç³»ç»Ÿ

## ğŸ“‹ æ¦‚è¿°

ä¸ºäº†ç¡®ä¿ä»£ç è´¨é‡ï¼Œé˜²æ­¢æŠ€æœ¯å€ºåŠ¡ç§¯ç´¯ï¼Œæˆ‘ä»¬å»ºç«‹äº†å®Œå–„çš„ä»£ç è´¨é‡é—¨ç¦ç³»ç»Ÿã€‚è¯¥ç³»ç»ŸåŒ…æ‹¬æœ¬åœ°æ£€æŸ¥ã€CI/CDè‡ªåŠ¨åŒ–æ£€æŸ¥å’Œè´¨é‡æŠ¥å‘ŠåŠŸèƒ½ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. åˆå§‹åŒ– Git Hooks

```bash
npm run prepare
```

### 3. è¿è¡Œè´¨é‡æ£€æŸ¥

```bash
npm run quality:check
```

## ğŸ”§ è´¨é‡æ£€æŸ¥å·¥å…·

### å‘½ä»¤è¡Œå·¥å…·

| å‘½ä»¤ | åŠŸèƒ½ | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| `npm run lint` | ESLint ä»£ç è§„èŒƒæ£€æŸ¥ | æ—¥å¸¸å¼€å‘ |
| `npm run lint:fix` | ESLint è‡ªåŠ¨ä¿®å¤ | æäº¤å‰ä¿®å¤ |
| `npm run type-check` | TypeScript ç±»å‹æ£€æŸ¥ | æ„å»ºå‰éªŒè¯ |
| `npm run format` | Prettier æ ¼å¼åŒ– | ç»Ÿä¸€ä»£ç é£æ ¼ |
| `npm run quality:check` | ç»¼åˆè´¨é‡æ£€æŸ¥ | æäº¤å‰å¿…è¿è¡Œ |
| `npm run quality:fix` | è‡ªåŠ¨ä¿®å¤è´¨é‡é—®é¢˜ | å¿«é€Ÿä¿®å¤ |
| `npm run quality:report` | ç”Ÿæˆè´¨é‡æŠ¥å‘Š | é¡¹ç›®è¯„ä¼° |

### é¢„æäº¤é’©å­ï¼ˆPre-commit Hooksï¼‰

é¡¹ç›®é…ç½®äº† husky å’Œ lint-stagedï¼Œåœ¨æ¯æ¬¡æäº¤å‰è‡ªåŠ¨è¿è¡Œï¼š

1. **ESLint æ£€æŸ¥å’Œä¿®å¤**
   - è‡ªåŠ¨ä¿®å¤å¯ä¿®å¤çš„é—®é¢˜
   - é˜»æ­¢åŒ…å«é”™è¯¯çš„ä»£ç æäº¤

2. **Prettier æ ¼å¼åŒ–**
   - è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç 
   - ç¡®ä¿ä»£ç é£æ ¼ç»Ÿä¸€

3. **å¯¼å…¥æ’åº**
   - è‡ªåŠ¨æ•´ç† import è¯­å¥é¡ºåº

## ğŸ“Š è´¨é‡æ ‡å‡†

### ä»£ç è§„èŒƒ

- ESLint è­¦å‘Šæ•° < 10
- ESLint é”™è¯¯æ•° = 0
- ä»£ç æ ¼å¼ç¬¦åˆ Prettier è§„èŒƒ

### TypeScript

- ç¼–è¯‘æ— é”™è¯¯
- ä¸¥æ ¼ç±»å‹æ£€æŸ¥
- æ˜¾å¼è¿”å›ç±»å‹ï¼ˆè­¦å‘Šçº§åˆ«ï¼‰

### ä»£ç å¤æ‚åº¦

- å‡½æ•°åœˆå¤æ‚åº¦ < 10
- åµŒå¥—å±‚çº§ < 4
- å‚æ•°æ•°é‡ < 5
- å‡½æ•°é•¿åº¦ < 100 è¡Œ

### æµ‹è¯•è¦†ç›–ç‡

- ä»£ç è¡Œè¦†ç›–ç‡ >= 80%
- å‡½æ•°è¦†ç›–ç‡ >= 80%
- åˆ†æ”¯è¦†ç›–ç‡ >= 80%
- è¯­å¥è¦†ç›–ç‡ >= 80%

## ğŸ” CI/CD è´¨é‡é—¨ç¦

### GitHub Actions å·¥ä½œæµ

é¡¹ç›®é…ç½®äº† `.github/workflows/quality-check.yml`ï¼Œåœ¨ä»¥ä¸‹æƒ…å†µè‡ªåŠ¨è¿è¡Œï¼š

- **Push åˆ° main/develop åˆ†æ”¯**
- **åˆ›å»º Pull Request**

### æ£€æŸ¥å†…å®¹

1. **ç±»å‹æ£€æŸ¥**
   ```bash
   npm run type-check
   ```

2. **ä»£ç è§„èŒƒæ£€æŸ¥**
   ```bash
   npm run lint -- --format=github --max-warnings 10
   ```

3. **æ ¼å¼æ£€æŸ¥**
   ```bash
   npm run format -- --check
   ```

4. **æ„å»ºæ£€æŸ¥**
   ```bash
   npm run build
   ```

5. **æµ‹è¯•å’Œè¦†ç›–ç‡**
   ```bash
   npm run test:coverage
   ```

### è´¨é‡é—¨ç¦è§„åˆ™

- âœ… æ‰€æœ‰æ£€æŸ¥é€šè¿‡æ‰èƒ½åˆå¹¶
- âš ï¸ è¦†ç›–ç‡ä½äº 80% ä¼šå¤±è´¥
- âŒ ESLint é”™è¯¯ä¼šé˜»æ­¢åˆå¹¶
- âŒ ç±»å‹é”™è¯¯ä¼šé˜»æ­¢åˆå¹¶

## âš™ï¸ ç¼–è¾‘å™¨é›†æˆ

### VSCode é…ç½®

é¡¹ç›®åŒ…å«ä¼˜åŒ–çš„ VSCode é…ç½®ï¼š

1. **è‡ªåŠ¨æ ¼å¼åŒ–ä¿å­˜**
   - ä¿å­˜æ—¶è‡ªåŠ¨è¿è¡Œ Prettier
   - ä¿å­˜æ—¶è‡ªåŠ¨ä¿®å¤ ESLint é—®é¢˜
   - è‡ªåŠ¨æ•´ç†å¯¼å…¥

2. **ç±»å‹æç¤ºå¢å¼º**
   - å†…è”ç±»å‹æç¤º
   - å‚æ•°åç§°æç¤º
   - è¿”å›ç±»å‹æç¤º

3. **ä»£ç è´¨é‡å®æ—¶æ˜¾ç¤º**
   - é”™è¯¯å’Œè­¦å‘Šé«˜äº®
   - å¤æ‚åº¦æŒ‡ç¤ºå™¨
   - æµ‹è¯•è¦†ç›–ç‡æ ‡è®°

### æ¨èæ‰©å±•

å®‰è£… `.vscode/extensions.json` ä¸­çš„æ¨èæ‰©å±•ï¼š

```json
{
  "recommendations": [
    "dbaeumer.vscode-eslint",
    "esbenp.prettier-vscode",
    "ms-vscode.vscode-typescript-next",
    "sonarsource.sonarlint-vscode",
    "eamodio.gitlens",
    "prisma.prisma"
  ]
}
```

## ğŸ“ è´¨é‡æŠ¥å‘Š

### ç”ŸæˆæŠ¥å‘Š

```bash
npm run quality:report
```

æŠ¥å‘Šå†…å®¹ï¼š
- é¡¹ç›®è§„æ¨¡ç»Ÿè®¡
- ä»£ç å¤æ‚åº¦åˆ†æ
- æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
- è´¨é‡é—¨ç¦çŠ¶æ€
- ä¼˜åŒ–å»ºè®®

### æŠ¥å‘Šæ–‡ä»¶

- `quality-report.json` - ç®€ç‰ˆæŠ¥å‘Š
- `quality-report-detailed.json` - è¯¦ç»†æŠ¥å‘Š

## ğŸ› ï¸ æ—¥å¸¸å¼€å‘æµç¨‹

### 1. å¼€å‘æ–°åŠŸèƒ½

```bash
# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/xxx

# å¼€å‘ä»£ç ...
# å®šæœŸè¿è¡Œè´¨é‡æ£€æŸ¥
npm run quality:check
```

### 2. æäº¤ä»£ç 

```bash
# è‡ªåŠ¨è¿è¡Œ pre-commit hooks
git add .
git commit -m "feat: add new feature"
```

### 3. æ¨é€å’Œ PR

```bash
git push origin feature/xxx
# åˆ›å»º Pull Request
# CI ä¼šè‡ªåŠ¨è¿è¡Œè´¨é‡æ£€æŸ¥
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ESLint é”™è¯¯æ— æ³•è‡ªåŠ¨ä¿®å¤**
   ```bash
   npm run lint  # æŸ¥çœ‹å…·ä½“é”™è¯¯
   npm run lint:fix  # å°è¯•ä¿®å¤
   # æ‰‹åŠ¨ä¿®å¤æ— æ³•è‡ªåŠ¨ä¿®å¤çš„é—®é¢˜
   ```

2. **TypeScript ç±»å‹é”™è¯¯**
   ```bash
   npm run type-check  # æŸ¥çœ‹ç±»å‹é”™è¯¯
   # æ ¹æ® TS é”™è¯¯ä¿¡æ¯ä¿®å¤ä»£ç 
   ```

3. **æµ‹è¯•è¦†ç›–ç‡ä¸è¶³**
   ```bash
   npm run test:coverage  # æŸ¥çœ‹è¦†ç›–ç‡æŠ¥å‘Š
   # åœ¨ coverage/lcov-report/index.html æŸ¥çœ‹è¯¦æƒ…
   # ä¸ºæœªè¦†ç›–çš„ä»£ç ç¼–å†™æµ‹è¯•
   ```

4. **å‡½æ•°å¤æ‚åº¦è¿‡é«˜**
   ```bash
   npm run quality:report  # æŸ¥çœ‹å¤æ‚åº¦æŠ¥å‘Š
   # å°†å¤æ‚å‡½æ•°æ‹†åˆ†ä¸ºæ›´å°çš„å‡½æ•°
   ```

### è·³è¿‡æ£€æŸ¥ï¼ˆç´§æ€¥æƒ…å†µï¼‰

```bash
# ä»…é™ç´§æ€¥æƒ…å†µï¼Œä¸å»ºè®®ä½¿ç”¨
git commit --no-verify -m "chore: emergency fix"
```

## ğŸ“ˆ æŒç»­æ”¹è¿›

### è´¨é‡æŒ‡æ ‡è·Ÿè¸ª

- æ¯å‘¨æŸ¥çœ‹è´¨é‡æŠ¥å‘Šè¶‹åŠ¿
- è·Ÿè¸ªæŠ€æœ¯å€ºåŠ¡å‡å°‘æƒ…å†µ
- ç›‘æ§æµ‹è¯•è¦†ç›–ç‡æå‡

### å›¢é˜Ÿè§„èŒƒ

1. **Code Review** å¿…é¡»é€šè¿‡æ‰€æœ‰è´¨é‡æ£€æŸ¥
2. **æ–°åŠŸèƒ½** å¿…é¡»åŒ…å«æµ‹è¯•
3. **é‡æ„** å‰å…ˆè¿è¡Œè´¨é‡åŸºçº¿
4. **ä¿®å¤ Bug** æ—¶æ·»åŠ å›å½’æµ‹è¯•

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ESLint é…ç½®](/.eslintrc.js)
- [Prettier é…ç½®](/.prettierrc)
- [TypeScript é…ç½®](/tsconfig.json)
- [Husky é…ç½®](/.husky/pre-commit)

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. éµå¾ªä»£ç è§„èŒƒ
4. é€šè¿‡è´¨é‡æ£€æŸ¥
5. æäº¤ Pull Request

---

ğŸ’¡ **æç¤º**: è´¨é‡é—¨ç¦çš„ç›®çš„æ˜¯æå‡ä»£ç è´¨é‡ï¼Œè€Œä¸æ˜¯é˜»ç¢å¼€å‘ã€‚é‡åˆ°é—®é¢˜æ—¶ï¼Œè¯·å¯»æ±‚å›¢é˜Ÿå¸®åŠ©ï¼Œå…±åŒæ‰¾åˆ°æœ€ä½³è§£å†³æ–¹æ¡ˆã€‚