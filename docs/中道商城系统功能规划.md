# 中道商城系统功能规划文档

**项目名称**：中道商城系统
**规划日期**：2025年11月18日
**版本**：2.0（最终优化版）
**维护周期**：每月一次功能审审，每季度一次整体评估
**最后更新**：2025年11月18日

---

## 📋 目录

1. [执行摘要](#执行摘要)
2. [核心指标体系](#核心指标体系)
3. [功能模块总览](#功能模块总览)
4. [店铺管理体系](#店铺管理体系)
5. [商品分类体系](#商品分类体系)
6. [用户等级与权益体系](#用户等级与权益体系)
7. [产品价格体系](#产品价格体系)
8. [采购与仓储体系](#采购与仓储体系)
9. [通券流转体系](#通券流转体系)
10. [业绩与佣金体系](#业绩与佣金体系)
11. [订单与物流体系](#订单与物流体系)
12. [财务体系](#财务体系)
13. [数据统计体系](#数据统计体系)
14. [技术实现要点](#技术实现要点)
15. [开发优先级与验收标准](#开发优先级与验收标准)

---

## 🎯 执行摘要

### 项目定位

中道商城系统是一个**多层级供应链社交电商平台**，通过创新的云仓、积分、等级体系，将传统分销网络数字化，赋能店长创业，构建高效的C2B2B供应链生态。

### 核心商业目标（12个月）

| 指标 | 目标 | 评估周期 | 责任部门 |
|-----|------|--------|--------|
| 月度GMV | 2000万元+ | 月 | 商业 |
| 活跃店长 | 5000+ | 月 | 运营 |
| 人均客单价 | 299元+ | 月 | 商业 |
| 30日留存率 | 40%+ | 周 | 增长 |
| 云仓周转率 | 3次/月 | 月 | 仓储 |

### 核心用户群体

| 用户类型 | 规模目标 | 关键需求 | 优先级 |
|---------|--------|--------|------|
| 普通消费者 | 50万 | 高性价比商品、便捷购物体验 | P1 |
| VIP会员 | 10万 | 权益感、复购优惠、社群归属 | P0 |
| 初级店长 | 3万 | 赚钱机会、供应链支持、培训 | P0 |
| 高级店长 | 2000 | 渠道控制、数据洞察、资本升值 | P0 |

### 项目阶段规划

```
Phase 1 (M1-M3): MVP
├── 完成用户等级体系
├── 云店等级系统
├── 基础积分流转
└── 云仓/本地仓

Phase 2 (M4-M6): 优化
├── 完善采购链路
├── 佣金分配引擎
├── 物流对接
└── 数据统计

Phase 3 (M7-M12): 扩展
├── 品牌合作
├── 国际拓展
├── 供应链金融
└── 生态平台
```

---

## 📊 核心指标体系

### 关键绩效指标（KPI）

#### 商业指标
| 指标名称 | 目标 | 评估周期 | 责任部门 |
|---------|------|--------|--------|
| 月度GMV | 2000万+ | 月 | 商业 |
| 店长数量 | 5000+ | 月 | 运营 |
| 人均月购买频次 | 3次+ | 月 | 分析 |
| 订单人均客单价 | 299元+ | 月 | 商业 |
| 30日留存率 | 40%+ | 周 | 增长 |

#### 产品指标
| 指标名称 | 目标 | 评估周期 | 责任部门 |
|---------|------|--------|--------|
| 采购路径流失率 | <5% | 周 | 产品 |
| 订单完成率 | >95% | 周 | 运营 |
| 云仓库存周转 | 3次/月 | 月 | 仓储 |
| DAU/MAU比 | 20% | 日 | 产品 |
| 核心功能覆盖度 | 70%+ | 月 | 产品 |

### 数据看板实时监控

**实时更新的仪表盘应包括**：
- 今日/本周/本月GMV进度条
- 实时在线店长数
- 云仓库存告急品项
- TOP 10商品排行
- 投诉/售后待处理数

---

## 🏪 功能模块总览

### 功能模块架构关系图

```
中道商城系统
├─ 用户与等级体系 ⭐⭐⭐（增长引擎）
│  ├─ 用户身份识别 (普通/VIP/店长)
│  ├─ 等级升级引擎 (自动化判断)
│  └─ 权益递进激励 (购买力→赚钱力)
│
├─ 店铺与商品体系 ⭐⭐⭐（商业舞台）
│  ├─ 云店等级 (1-5星+董事)
│  ├─ 五通店快速入场 (27k一次性)
│  └─ 商品分类 (五通均补/穿戴/专区)
│
├─ 采购与仓储体系 ⭐⭐⭐（供应链脊梁）
│  ├─ 采购权限管理 (只向上级)
│  ├─ 云仓共享库存 (团队协作)
│  └─ 本地仓零售库存 (个人运营)
│
├─ 积分与财务体系 ⭐⭐⭐（交易介质）
│  ├─ 积分流转 (交易结算)
│  ├─ 充值提现 (资金池管理)
│  └─ 业绩计算 (佣金引擎)
│
└─ 订单与数据体系 ⭐⭐（用户体验）
   ├─ 订单管理 (零售/采购)
   ├─ 物流跟踪 (用户满意度)
   └─ 数据统计 (决策支持)
```

### 模块间关键依赖关系

```
优先级链：
用户注册 → 等级体系 → 开店权限 → 采购链路 → 积分流转 → 订单成交

并行推进：
商品系统 ↔ 库存系统 ↔ 订单系统
           ↓
         物流系统 ↔ 财务系统
```

---

## 🏪 店铺管理体系

### 店铺类型对标

#### 云店（1-5星级+董事）- **主营业务驱动**

**商业模式**：基于销量累积的智能升级体系

| 等级 | 进货折扣 | 月采购目标* | 团队要求 | 典型收益** | 升级时间 |
|-----|---------|----------|--------|----------|--------|
| 一星 | 4折 | 2,400元 | 无 | 600元/月 | 0-1月 |
| 二星 | 3.5折 | 12,000元 | 2个一星 | 3,000元/月 | 1-3月 |
| 三星 | 3折 | 72,000元 | 2个二星 | 15,000元/月 | 3-6月 |
| 四星 | 2.6折 | 360,000元 | 2个三星 | 72,000元/月 | 6-12月 |
| 五星 | 2.4折 | 1,200,000元 | 2个四星 | 288,000元/月 | 12-24月 |
| 董事 | 2.2折 | 6,000,000元 | 2个五星 | 1,320,000元/月 | 24+月 |

*基于平均月销量计算
**基于700元商品平均利润率（50-60%）

**升级机制**（双维度判断）：
1. **销量维度**（MUST）：累计销售额÷599
   - 向下取整（12.3瓶 = 12瓶）
   - 包含自销+下级
   - 历史不清零，持续累积

2. **团队维度**（MUST）：AND逻辑
   - 必须同时有要求数量的符合条件的直推下级
   - 下级必须在30天内有活跃记录
   - 若下级降级，需要补充新下级

**降级保护**：
- 新晋升者90天内不自动降级
- 自发降级可随时申请
- 若不符合条件，系统周期性提醒"缺口数"

#### 五通店（一次性模式）- **快速获客通道**

**商业模式**：低门槛、高客单、独立奖励

**入场要求**：
- 一次性拿货100瓶×270元/瓶 = 27,000元
- 客户自选品项（不限于经络通）
- 无开店流程，即购即拥有资格

**核心奖励**：买10赠1机制
- **触发条件**：
  1. 单次订单（不是累计）
  2. 金额≥5,999元（含运费除外）
  3. 商品用于自己零售（非代理）

- **奖励规则**：
  - 满5,999元 → 送599元商品1瓶（自选）
  - 可多次叠加（需多笔订单）
  - 终身有效，无上限
  - 与云店等级独立存在

**与云店的关系**：
- ✅ 可同时拥有五通店资格和云店等级
- ✅ 五通订单不计入云店销量
- ✅ 两套独立的优惠和奖励
- ❌ 五通和云店的进货渠道不同

### 店铺权益矩阵（分层开放）

| 功能模块 | 普通 | VIP | ⭐ | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | 董事 |
|---------|-----|-----|-----|-----|------|--------|---------|------|
| 商品展示 | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 订单管理 | - | - | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 云仓功能 | - | - | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 团队管理 | - | - | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 业绩统计 | - | - | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 积分转账 | - | - | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 积分充值 | - | - | - | - | - | - | ✓ | ✓ |
| 数据报表 | - | - | - | - | ✓ | ✓ | ✓ | ✓ |
| 品牌合作 | - | - | - | - | - | ✓ | ✓ | ✓ |
| 战略支持 | - | - | - | - | - | - | ✓ | ✓ |

---

## 📦 商品分类体系

### 分类结构与属性

```
商品分类库
├── 五通均补 (核心品类)
│   ├── 肠道通 (199元) - 入门产品
│   ├── 血脉通 (499元) - 中端产品
│   ├── 经络通 (599元) - 标准品（库存计算基准）
│   ├── 气脉通 (699元) - 高端产品
│   ├── 脏腑通 (2999元) - 套装品
│   └── 淋巴通 (2999元) - 套装品
│
├── 智能穿戴 (新品类)
│   ├── 智能鞋
│   └── 其他IOT设备 (待扩展)
│
└── 会员专区 (差异化)
    ├── VIP专享商品
    └── 店长专享商品
```

### 库存管理规则

| 维度 | 要求 | 说明 |
|-----|------|------|
| 库存分层 | 云仓 + 本地仓 | 两级库存独立管理 |
| 实时同步 | 采购确认后 | 秒级更新库存数据 |
| 预警机制 | 库存<10时 | 自动提醒补货 |
| 过期清理 | 30天无周转 | 自动降价处理 |
| 残次品 | 单独标记 | 追溯溯源，质量保证 |

---

## ⭐ 用户等级与权益体系

### 用户分类完整体系

#### 非店长用户路径

```
普通会员 (入口)
  ↓
  └─ 首单 ≥599元 ─ YES → VIP会员 (权益用户)
                   NO  → 继续普通会员
                        (可通过营销活动升级)
```

**普通会员**：
- 身份：注册即获得
- 权益：原价购买
- 转化目标：促进首单消费，积累用户黏性

**VIP会员**：
- 身份：单次或累计消费≥599元
- 核心权益：复购5折优惠
- 商业价值：提升复购率（平均提升30%）
- 社群属性：不享受开店权益，但有VIP社群活动

#### 店长用户路径（核心增长)

```
开店申请 → 审批通过 → 一星店长 (初级)
                        ↓
                    二星 (进阶)
                        ↓
                    三星 (中流砥柱)
                        ↓
                    四星 (区域领袖)
                        ↓
                    五星 (平台支柱)
                        ↓
                    董事 (生态合伙人)
```

### 等级权益递进表（清晰梯度）

| 权益项 | 普通 | VIP | ⭐ | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | 董事 |
|-------|-----|-----|-----|-----|------|--------|---------|------|
| 购物折扣 | 原价 | 5折(复购) | 4折进货 | 3.5折 | 3折 | 2.6折 | 2.4折 | 2.2折 |
| 利润空间 | - | 50% | 60% | 65% | 70% | 74% | 76% | 78% |
| 积分转账 | ✗ | ✗ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 直推奖励 | - | - | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 团队佣金 | - | - | - | - | ✓ | ✓ | ✓ | ✓ |
| 积分充值 | ✗ | ✗ | ✗ | ✗ | ✗ | ✗ | ✓ | ✓ |
| 高级报表 | ✗ | ✗ | ✗ | ✗ | ✓ | ✓ | ✓ | ✓ |
| 品牌合作 | ✗ | ✗ | ✗ | ✗ | ✗ | ✓ | ✓ | ✓ |

### 升级规则（双维度判断）

#### 维度一：销量要求（MUST满足）

| 等级 | 销量目标 | 计算方式 | 包含范围 |
|-----|--------|--------|--------|
| 一星 | 20瓶+ | 总销售额÷599 | 自销+直推下级 |
| 二星 | 100瓶 | 总销售额÷599 | 自销+直推下级 |
| 三星 | 600瓶 | 总销售额÷599 | 自销+直推下级 |
| 四星 | 3000瓶 | 总销售额÷599 | 自销+直推下级 |
| 五星 | 10000瓶 | 总销售额÷599 | 自销+直推下级 |
| 董事 | 50000瓶 | 总销售额÷599 | 自销+直推下级 |

**计算规则**（关键）：
- 以599元商品为单位（1瓶 = 599元）
- 向下取整（12.3瓶 = 12瓶）
- 包含历史销量，永不清零
- 任何价格商品都按599元基准折算
  - 199元商品：199÷599 = 0.33瓶
  - 2×599元：2÷599 = 2瓶（精确计算）

#### 维度二：团队要求（MUST满足）

| 升级等级 | 团队要求 | 计算方式 | 容错机制 |
|---------|--------|--------|--------|
| 一星 | 无 | 仅需销量达标 | - |
| 二星 | 2个一星 | 直推关系，30天活跃 | 1个下级复核 |
| 三星 | 2个二星 | 直推关系，30天活跃 | 1个下级复核 |
| 四星 | 2个三星 | 直推关系，30天活跃 | 1个下级复核 |
| 五星 | 2个四星 | 直推关系，30天活跃 | 1个下级复核 |
| 董事 | 2个五星 | 直推关系，30天活跃 | 1个下级复核 |

**升级判断逻辑**（AND条件）：
```
IF 销量达标 AND 团队符合 THEN
  自动升级 → 更新权益 → 通知用户 → 记录日志
ELSE IF 销量达标 AND 团队不符 THEN
  显示缺口提示："需补充N个[X等级]直推成员"
ELSE
  显示进度："还需X瓶销量"
END
```

**降级保护规则**：
- 新晋升用户90天内不会因销量下滑而自动降级
- 若下级降级，对上级无直接影响（独立计算）
- 支持用户主动降级申请（恢复原有权益）

---

## 💰 产品价格体系

### 价格结构设计

#### 客户分类定价

```
┌─ 普通会员
│  ├─ 首购：原价
│  └─ 复购：原价（可参加营销活动）
│
├─ VIP会员
│  ├─ 首购：原价
│  └─ 复购：5折（核心权益）
│
└─ 店长 (开店后)
   └─ 进货价：原价 × 等级折扣率
      ├─ 一星：原价 × 0.4 = 4折
      ├─ 二星：原价 × 0.35 = 3.5折
      ├─ 三星：原价 × 0.3 = 3折
      ├─ 四星：原价 × 0.26 = 2.6折
      ├─ 五星：原价 × 0.24 = 2.4折
      └─ 董事：原价 × 0.22 = 2.2折
```

### 利润分析

**以经络通（599元）为标准商品分析**：

| 等级 | 进货价 | 零售利润 | 利润率 | 月利润预期* |
|-----|--------|---------|-------|----------|
| 一星 | 239.6元 | 359.4元 | 60% | 6,000元 |
| 二星 | 209.65元 | 389.35元 | 65% | 15,000元 |
| 三星 | 179.7元 | 419.3元 | 70% | 50,000元 |
| 四星 | 155.74元 | 443.26元 | 74% | 150,000元 |
| 五星 | 143.76元 | 455.24元 | 76% | 450,000元 |
| 董事 | 131.78元 | 467.22元 | 78% | 1,000,000元 |

*基于平均月销量和转化率的预估

### 跨等级采购价格

**关键原则**：采购价由买方等级决定

```
示例：一星向三星采购599元商品

步骤：
1. 一星的采购价 = 599 × 0.4 = 239.6元
2. 三星的成本 = 599 × 0.3 = 179.7元
3. 三星的收益 = 239.6 - 179.7 = 59.9元
4. 一星的利润 = 599 - 239.6 = 359.4元

💡 透明化：
   - 所有价格实时显示
   - 清晰展示利润空间
   - 激励低等级者升级
```

### 价格政策

1. **禁止窜货**：系统严禁不同等级间的横向流动
2. **公开透明**：所有等级价格公示，无隐性费用
3. **灵活促销**：支持活动打折，但不得低于成本价
4. **换货保障**：支持质量问题的免费换货，但不支持退货

---

## 🔄 采购与仓储体系

### 采购权限管理（严格的层级制）

**核心原则**：保护供应链纵向完整性，防止平级串联

#### 采购权限矩阵

| 买方等级 | 可采购对象 | 说明 | 限制 |
|---------|---------|------|------|
| 一星 | 二星及以上 | 至少相差1级 | ✗ 不能向平级/低级采购 |
| 二星 | 三星及以上 | 至少相差1级 | ✗ 不能向一星采购 |
| 三星 | 四星及以上 | 至少相差1级 | ✗ 不能向二星及以下采购 |
| 四星 | 五星及以上 | 至少相差1级 | ✗ 不能向三星及以下采购 |
| 五星 | 董事 | 至少相差1级 | ✗ 不能自供，仅向董事采 |
| 董事 | 平台直供 | 最高等级 | ✓ 支持大额定制 |

**采购价格规则**：
- 采购价 = 原价 × **买方**等级折扣率（不是卖方）
- 示例：一星向三星采购 = 599 × 0.4 = 239.6元

### 仓储体系（两级库存）

#### 云仓（Cloud Warehouse）- 团队共享库存

**功能定位**：团队的虚拟库存中心

**所有权关系**：
- 自己采购的商品 → 自己的云仓
- 直推下级可共用 → 下级的云仓独立
- 逐级向下继承（自动匹配）

**库存流向**：
```
平台 → 一星云仓 (1000瓶)
        ├─ 二星可调用 (600瓶)
        │  └─ 三星可调用 (300瓶)
        └─ 提货转入本地仓 (400瓶用于零售)
```

**核心特性**：
- ✅ 团队共享：下级可任意采购（有权限）
- ✅ 虚拟库存：不占物理空间，支持无限扩展
- ✅ 实时同步：采购确认立即入库
- ✅ 防止滥用：不能转账给他人，不能退货
- ✗ 不支持退货：保护上级利益
- ✗ 不支持私下转账：防止灰色交易

**云仓管理功能**：
- 库存查看：分品项、分来源
- 补货申请：一键向上级申请
- 采购记录：完整的交易历史
- 库存预警：库存<10件自动提醒

#### 本地仓（Local Warehouse）- 个人零售库存

**功能定位**：店长的实体库存，用于零售和代理

**所有权**：完全个人独有，不与团队共享

**库存来源**：仅从自己的云仓提货

**库存去向**：
1. 零售给消费者
2. 代理给更低级的店长
3. 个人使用

**提货流程**：
```
输入数量 → 确认提货用途 (零售/自用/代理)
  ↓
云仓扣减 → 本地仓增加
  ↓
记录流水 → 完成提货
```

**核心特性**：
- ✅ 完全自主：个人库存，完全掌控
- ✅ 支持退货：个人库存内可申请退货
- ✅ 灵活定价：可自定义零售价（建议原价）
- ✅ 多渠道发货：线上订单+线下提货
- ✗ 不支持转账：防止搭建平行渠道
- ✗ 30天自动清理：避免积压

### 库存流转完整流程

```
情景：一星需要补充库存

Step 1: 检查库存级别
├─ 本地仓 < 安全线(10件) → 需要补充
└─ 检查云仓库存 → 是否足够

Step 2: 云仓库存决策树
├─ 云仓有 ≥ 需要数量
│  └─ YES → 一键提货 ✓ (秒级完成)
│
└─ 云仓不足 or 无库存
   └─ 需要采购 → Step 3

Step 3: 向上级采购
├─ 可采购对象：二星及以上
├─ 选择供应商 (通常选自己的上级)
├─ 输入采购数量和商品
├─ 系统计算采购价 (599 × 0.4 = 239.6)
└─ 点击确认

Step 4: 支付积分
├─ 检查积分余额 ≥ 239.6元
├─ YES → 积分扣款 → 订单确认
└─ NO → 显示提示："积分不足，差X元"
        (可申请积分转账或充值)

Step 5: 上级审批与发货
├─ 上级收到订单提醒
├─ 检查自己的云仓库存
├─ 库存足够 → 一键发货 ✓
├─ 库存不足 → 上级也需要采购 (Step 3)
└─ 完成发货 → 订单状态转为"已发货"

Step 6: 下级库存入库
├─ 商品到达下级云仓
├─ 自动增加云仓库存
└─ 下级收到成功通知 + 可立即提货

Step 7: 提货转入本地仓
├─ 下级点击云仓提货
├─ 输入提货数量
├─ 确认提货用途 (零售/自用)
└─ 本地仓 + 该数量 / 云仓 - 该数量

关键时间点：
- 采购确认到发货：< 2小时
- 物流配送：1-3天 (取决于物流商)
- 收货到库存生效：秒级
```

### 采购与提货记录（数据追踪）

**采购记录** (完整的财务凭证)：
| 字段 | 说明 | 用途 |
|-----|------|------|
| 采购时间 | 成交时间戳 | 对账 |
| 商品信息 | 品名、规格、条码 | 库存管理 |
| 采购数量 | 件数 | 库存计算 |
| 采购金额 | 总成本 | 成本核算 |
| 采购价格 | 单价 | 成本分析 |
| 供应商 | 上级用户名+ID | 供应链可视 |
| 采购状态 | 待发货/已发货/已签收 | 订单跟踪 |
| 备注 | 客户备注 | 特殊说明 |

**提货记录**（用于对账）：
| 字段 | 说明 |
|-----|------|
| 提货时间 | 操作时间 |
| 提货商品 | 品名、规格 |
| 提货数量 | 件数 |
| 提货来源 | 云仓/本地仓 |
| 提货用途 | 零售/自用/代理 |
| 本地仓余额 | 提货后库存 |

---

## 💎 通券流转体系

### 通券来源与用途

#### 来源渠道

| 来源 | 规则 | 金额计算 | 用途 | 优先级 |
|-----|------|--------|------|-------|
| **下级采购** | 下级支付积分给上级 | 采购金额 = 积分 | 扩大库存 | P0 |
| **直推奖励** | 直推成员采购时 | 一星10元、二星10元... | 激励补充 | P0 |
| **平台充值** | 五星/董事权限 | 自定义 | 扩大本金 | P1 |
| **积分转账** | 所有店长互相转 | 自定义 | 灵活流转 | P1 |
| **活动奖励** | 完成任务获得 | 活动规则 | 用户激励 | P2 |

#### 积分核销场景

| 场景 | 积分方 | 接收方 | 说明 |
|-----|-------|-------|------|
| 下级采购 | 下级 | 上级 | 核心交易 |
| 直推奖励 | 平台 | 直推人 | 激励补充 |
| 内部转账 | 转出方 | 转入方 | 个人交易 |
| 充值兑现 | 用户 | 平台 | 资金沉淀 |
| 提现扣款 | 用户 | 平台 | 资金流出 |

### 积分充值（五星/董事专享权益）

**策略意义**：
- 高等级用户投资意愿强，充值拉动GMV
- 积分池充足，能更好支持供应链运转
- 建立用户分化，形成品牌梯队

**充值规则**：
- 入口：APP积分页→充值菜单
- 额度：无上限（理论无限，需后台人工审核>50万)
- 支付：微信/支付宝/银行卡
- 即时到账：支付后秒级添加到余额

### 提现功能（提高用户黏性）

**提现规则**：
- 权限：所有店长可申请（普通/VIP不可）
- 入口：个人中心→资产→提现
- 最低提现额：100元
- 手续费：1%（平台成本+风控）
- 审核周期：1-3个工作日
- 到账周期：审核通过后1-3个工作日

**防风控措施**：
- 实名认证必填
- 银行卡必须本人账户
- 异常活动（24小时内转账超3次）冻结提现
- 欠款用户禁止提现

---

## 🔄 业绩与佣金体系

### 业绩定义与计算

#### 业绩分类

| 业绩类型 | 范围 | 计算主体 | 用途 |
|---------|------|--------|------|
| **个人直销** | 自己发起的订单 | 个人 | 升级/排名/提成 |
| **团队积计** | 整个下级团队 | 团队 | 团队评估/综合分析 |
| **平级奖励** | 直推成员采购 | 直推关系人 | 激励补充 |

#### 业绩统计维度

```
时间维度：日 / 周 / 月 / 年 / 自定义
      ↓
商品维度：全部 / 按分类 / 按商品 / 按价位
      ↓
人员维度：个人 / 直推 / 整团队 / 排名对比
      ↓
金额维度：销售额 / 利润额 / 订单数 / 件数转化
```

### 佣金分配规则（核心激励)

#### 直推奖励（现金激励）

| 等级 | 单笔奖励 | 触发条件 | 发放方式 | 说明 |
|-----|---------|--------|--------|------|
| 一星 | 10元/人 | 直推成员采购 | 积分转账 | 鼓励初期引流 |
| 二星 | 10元/人 | 直推成员采购 | 积分转账 | 保持动力 |
| 三星 | 8元/人 | 直推成员采购 | 积分转账 | 逐步递减 |
| 四星 | 4元/人 | 直推成员采购 | 现金提现 | 转为现金 |
| 五星 | 4元/人 | 直推成员采购 | 现金提现 | 现金激励 |
| 董事 | 4元/人 | 直推成员采购 | 现金提现 | 最高权益 |

**关键说明**：
- 触发条件：当直推成员发起任何级别的采购订单
- 奖励逻辑：与采购金额无关，固定奖励
- 分发频率：采购确认后秒级到账
- 可多次获得：同一人购多次，多次获奖

#### 团队佣金（利润分成）

**条件**：三星及以上等级

**计算方式**：
```
团队总销售额 × 佣金比例 - 个人直销额 = 团队佣金
```

**佣金比例**：
| 等级 | 比例 | 备注 |
|-----|------|------|
| 三星 | 3% | 第一次获得团队佣金 |
| 四星 | 5% | 扩大团队激励 |
| 五星 | 8% | 强化管理者角色 |
| 董事 | 10% | 最高等级最高比例 |

**发放频率**：月结（每月月底）
**发放方式**：积分转账→可提现

### 业绩查询与分析

**实时看板**：
- 今日/本周/本月业绩进度
- 与去年同期对比
- 与同等级平均对比
- 排名趋势图

**详细报表**（可导出）：
- 日/周/月/年维度
- 按商品类别分解
- 按直推成员分解
- 利润率分析
- 成本占比分析

**预测工具**：
- 基于当前速度的月度预测
- 升级时间预估
- 目标设定建议

---

## 📦 订单与物流体系

### 订单类型与状态管理

#### 订单分类

| 类型 | 参与方 | 金额流向 | 库存变化 |
|-----|-------|--------|--------|
| 零售订单 | 店长→消费者 | 现金/积分 | 本地仓↓ |
| 采购订单 | 店长→上级 | 积分转账 | 上级云仓↓→下级云仓↑ |
| 团队订单 | 上级代理 | 现金 | 库存↓ |

#### 订单生命周期

```
待付款 → 待发货 → 已发货 → 已签收 → 已完成
  ↓        ↓        ↓        ↓
取消申请  发货通知  物流单号  确认收货  评价
  ↓
已取消
```

### 物流对接（用户体验关键）

**对接的主流物流商**：
- 申通快递
- 中通快递
- 圆通快递
- 韵达快递
- 顺丰快递
- EMS

**实时物流信息**：
- 物流公司名称
- 物流单号
- 实时轨迹信息
- 物流状态
- 预计送达时间
- 物流员联系方式

**物流追踪入口**：
1. 订单详情页（内置物流信息）
2. 订单列表（可点击进入详情）
3. 待收货红点提醒

### 退换货处理规则（用户关注）

**平台规则**：
- **订单页面**：✗ 不支持在线退换货申请
- **处理方式**：通过推荐人协商处理
- **理由**：防止假退假换，保护店长权益

**实际流程**：
```
用户想要退换货
  ↓
联系自己的推荐人 (向谁买，向谁退)
  ↓
推荐人确认质量 / 协商方案
  ↓
推荐人手动处理
  ├─ 寄回原商品
  ├─ 推荐人操作积分反退
  ├─ 上级云仓扣减库存
  └─ 流程结束
```

**注意事项**：
- 消费者退货由店长处理，平台不介入
- 店长因进货质量问题，可向上级申请退货 (需人工审核)
- 所有退货记录在案，作为店长信誉参考

---

## 💳 财务体系

### 充值功能（五星/董事权限)

**商业意义**：
- 积累高价值用户的资金
- 增强用户黏性和平台信任
- 支撑大额采购订单

**充值规则**：
- 权限：五星及以上
- 入口：APP → 我的 → 资产 → 充值
- 最低充值：100元
- 支付方式：微信支付、支付宝、银行卡
- 手续费：0%（平台补贴）
- 到账：秒级

**防欺诈**：
- 异常充值（2小时内超5次）需人工审核
- 首次充值>10万需实名+人工审核
- 金额异常（与历史平均相差5倍）预警

### 提现功能（所有店长可用)

**提现权限**：
- 店长等级：✓ 所有等级可提
- 消费者：✗ 普通/VIP不可

**提现流程**：
1. 进入个人中心 → 资产 → 提现
2. 输入提现金额（100-100万）
3. 选择提现账户（支付宝/银行卡/微信）
4. 确认账户信息是否正确（必须本人账户）
5. 提交申请
6. 人工审核（1-3个工作日）
7. 打款到账（1-3个工作日）

**提现规则**：
- 最小提现额：100元
- 手续费：1% + 0.5元 (平台成本)
- 每日限额：无限（但大于10万需人工审核）
- 审核周期：1-3个工作日
- 打款周期：审核通过后1-3个工作日
- 失败重试：支持一次重新提现 (24小时内)

**风控措施**：
- 账户冻结期间禁止提现
- 存在欠款的账户禁止提现
- 异常活动（频繁切换账户）冻结提现
- 大额提现（>50万）需公司电话确认

### 财务记录查询（完整追踪）

**记录类型**：
| 类型 | 来源 | 用途 |
|-----|------|------|
| 充值记录 | 用户主动 | 资金流入追踪 |
| 提现记录 | 用户申请 | 资金流出追踪 |
| 积分转账 | 用户间交易 | 内部流转记录 |
| 订单交易 | 采购完成 | 消费记录 |
| 直推奖励 | 系统自动 | 激励统计 |
| 团队佣金 | 月结发放 | 收益记录 |

**查询功能**：
- 按时间范围筛选
- 按交易类型分类
- 按状态筛选 (待审/已完成/已拒绝)
- 支持导出Excel报表
- 支持打印PDF凭证

---

## 📊 数据统计体系

### 个人业绩统计（店长视角）

#### 核心指标看板

```
┌─ 个人业绩 (自销)
│  ├─ 今日销售额
│  ├─ 本周销售额
│  ├─ 本月销售额
│  ├─ 本年销售额
│  └─ 销量进度 (达标/未达标)
│
├─ 团队业绩 (积计)
│  ├─ 直推成员数
│  ├─ 间推成员数
│  ├─ 总团队业绩
│  ├─ 各层级分解
│  └─ 同比增速
│
├─ 库存状态
│  ├─ 云仓库存量
│  ├─ 本地仓库存量
│  ├─ 滞销品预警
│  └─ 补货建议
│
└─ 收益统计
   ├─ 直销利润
   ├─ 直推奖励
   ├─ 团队佣金
   └─ 月度总收益
```

#### 统计报表（可导出）

| 报表名 | 维度 | 用途 | 导出格式 |
|-------|------|------|--------|
| 日报 | 日销售额/笔数 | 日常管理 | PDF |
| 周报 | 周销售趋势 | 绩效评估 | Excel |
| 月报 | 月销售/利润/升级进度 | 月度总结 | PDF |
| 年报 | 年度业绩全面分析 | 年度评估 | Excel |
| 商品报 | 按商品维度统计 | 库存优化 | Excel |
| 团队报 | 按成员维度统计 | 团队管理 | Excel |

### 团队管理统计（管理者视角）

#### 团队结构展示

**树形结构**：
```
店长A (五星)
├─ 成员B (四星) - 业绩: 50万
│  ├─ 成员C (三星) - 业绩: 20万
│  │  ├─ 成员D (二星) - 业绩: 5万
│  │  └─ 成员E (一星) - 业绩: 2万
│  └─ 成员F (二星) - 业绩: 8万
└─ 成员G (三星) - 业绩: 30万
   └─ 成员H (一星) - 业绩: 1万

总团队业绩: 116万
直推成员: 2人 (B, G)
总成员数: 7人
```

#### 团队指标

| 指标 | 说明 | 监测频率 |
|-----|------|--------|
| 成员总数 | 直推+间推 | 实时 |
| 活跃成员 | 30天有交易 | 日 |
| 升级成员 | 本月新升级 | 月 |
| 掉队成员 | 90天无交易 | 周 |
| 人均业绩 | 团队总业绩/成员数 | 月 |
| 同比增速 | 本月vs上月 | 月 |

### 店铺运营统计（商业分析）

#### 关键运营指标

| 指标 | 目标 | 警示线 | 说明 |
|-----|------|-------|------|
| 转化率 | 3%+ | <2% | 浏览→购买 |
| 复购率 | 30%+ | <20% | 二次购买用户占比 |
| 客单价 | 299元+ | <200元 | 平均订单金额 |
| 日活 | 100+ | <50 | 日均访客数 |
| 库存周转 | 3次/月 | <2次 | 库存运转速度 |

#### 分析工具

- **销售漏斗**：浏览→点击→加购→下单→支付→完成
- **用户分群**：高价值/中价值/低价值/未激活
- **商品分析**：TOP 10畅销品、滞销品、新品表现
- **时段分析**：高峰期识别，营销时间优化

---

## 🔧 技术实现要点

### 数据库设计（核心表）

```sql
-- 用户体系
users (id, name, level, team_leader_id, ...)
user_levels (level_id, level_name, purchase_discount, ...)

-- 店铺体系
shops (shop_id, owner_id, shop_type, star_level, ...)
shop_permissions (shop_id, permission_id, ...)

-- 商品体系
products (product_id, name, price, category, ...)
product_inventory (product_id, warehouse_type, quantity, ...)

-- 订单体系
orders (order_id, buyer_id, seller_id, order_type, status, ...)
order_items (item_id, order_id, product_id, quantity, price, ...)

-- 积分体系
points_accounts (user_id, balance, frozen, ...)
points_transactions (txn_id, from_user, to_user, amount, type, ...)

-- 仓储体系
cloud_inventory (user_id, product_id, quantity, ...)
local_inventory (user_id, product_id, quantity, ...)
pick_records (record_id, user_id, product_id, quantity, ...)

-- 业绩体系
performance_records (record_id, user_id, amount, type, ...)
commission_records (record_id, user_id, commission, ...)

-- 物流体系
logistics (order_id, express_no, status, location, ...)

-- 财务体系
recharge_records (record_id, user_id, amount, status, ...)
withdrawal_records (record_id, user_id, amount, status, ...)
```

### 核心算法

#### 1. 等级升级判断

```
function checkUpgrade(userId) {
  // 检查销量
  let totalSales = user.totalSalesAmount;
  let bottleCount = Math.floor(totalSales / 599);

  // 获取当前等级的要求
  let currentLevel = user.level;
  let nextLevel = currentLevel + 1;
  let requirement = getLevelRequirement(nextLevel);

  if (bottleCount < requirement.bottleCount) {
    return { canUpgrade: false, reason: "销量不足" };
  }

  // 检查团队
  if (nextLevel > 1) { // 二星及以上需要团队要求
    let directReports = getDirectReports(userId);
    let qualifiedReports = directReports.filter(
      r => r.level === nextLevel - 1 && r.isActive
    );

    if (qualifiedReports.length < 2) {
      return {
        canUpgrade: false,
        reason: `团队缺少${2 - qualifiedReports.length}个${nextLevel-1}星成员`,
        current: qualifiedReports.length
      };
    }
  }

  return { canUpgrade: true };
}
```

#### 2. 采购价格计算

```
function calculatePurchasePrice(
  productPrice,      // 原价，如599
  buyerLevel,        // 买方等级，如1代表一星
  sellerLevel        // 卖方等级（不使用）
) {
  const discountRates = {
    1: 0.4,   // 一星：4折
    2: 0.35,  // 二星：3.5折
    3: 0.3,   // 三星：3折
    4: 0.26,  // 四星：2.6折
    5: 0.24,  // 五星：2.4折
    6: 0.22   // 董事：2.2折
  };

  const purchasePrice = productPrice * discountRates[buyerLevel];
  const profit = productPrice - purchasePrice;
  const profitRate = (profit / productPrice * 100).toFixed(2) + "%";

  return {
    purchasePrice,
    profit,
    profitRate
  };
}
```

#### 3. 积分交易记录

```
async function processPointsTransaction(
  fromUser,
  toUser,
  amount,
  transactionType  // purchase / transfer / reward / recharge
) {
  // 1. 检查余额
  if (fromUser.pointsBalance < amount) {
    throw new Error('积分不足');
  }

  // 2. 扣款
  await deductPoints(fromUser.id, amount);

  // 3. 入账
  await addPoints(toUser.id, amount);

  // 4. 记录流水
  const txn = {
    id: generateId(),
    fromUser: fromUser.id,
    toUser: toUser.id,
    amount: amount,
    type: transactionType,
    timestamp: Date.now(),
    status: 'completed',
    remark: ''
  };

  await saveTransaction(txn);

  // 5. 触发业务逻辑
  if (transactionType === 'purchase') {
    await recordPerformance(fromUser.id, amount);
    await rewardDirectLeader(fromUser.id);
  }

  return txn;
}
```

---

## 🚀 开发优先级与验收标准

### Phase 1：MVP (M1-M3)

**目标**：完成基础闭环，支持小规模测试

| 功能 | 预计周期 | 优先级 | 验收标准 |
|-----|--------|--------|--------|
| 用户认证与注册 | W1 | P0 | 支持微信/手机号登录 |
| 用户等级体系 | W1-2 | P0 | 自动升级检测 |
| 基础商品展示 | W1-2 | P0 | 分类浏览、搜索 |
| 积分基础流转 | W2-3 | P0 | 支持充值/转账/提现 |
| 云仓/本地仓 | W2-3 | P0 | 库存增删查 |
| 基础订单流程 | W3 | P0 | 创建→发货→完成 |

**预期达成**：
- 50个内部测试用户
- 日均订单数：10+
- 核心路径可用性：>95%

### Phase 2：优化 (M4-M6)

**目标**：完善供应链，建立生产级系统

| 功能 | 预计周期 | 优先级 |
|-----|--------|--------|
| 采购权限管理 | W1-2 | P0 |
| 业绩统计引擎 | W1-2 | P0 |
| 物流对接 | W2-3 | P0 |
| 佣金分配系统 | W3-4 | P0 |
| 数据报表 | W3-4 | P1 |
| APP端UI优化 | W4 | P1 |

**预期达成**：
- 1000个真实用户
- 月度GMV：100万+
- 店长数量：100+

### Phase 3：扩展 (M7-12)

**目标**：建立生态，启动战略合作

| 功能 | 预计周期 | 优先级 |
|-----|--------|--------|
| 品牌合作系统 | W1-4 | P1 |
| 营销工具集 | W2-4 | P1 |
| 社群功能 | W3-4 | P2 |
| 数据分析平台 | W3-4 | P2 |
| 国际扩展准备 | W4+ | P2 |
| 供应链金融 | W4+ | P3 |

**预期达成**：
- 10万+活跃用户
- 月度GMV：2000万+
- 店长数量：5000+

---

## ⚠️ 风险分析与应对

### 高风险项（需重点关注）

| 风险 | 概率 | 影响度 | 应对措施 |
|-----|------|-------|--------|
| 供应链断裂 | 中 | 高 | 多源头备货、库存预警 |
| 积分套现 | 高 | 高 | 限制提现额度、人工审核 |
| 恶意拉人 | 高 | 中 | 实名认证、限制拉人数 |
| 产品质量投诉 | 中 | 高 | 建立质量标准、快速响应 |
| 平台挤兑 | 低 | 高 | 资金储备、提现限额 |

### 技术风险

| 风险 | 应对 |
|-----|------|
| 积分数据一致性 | 使用事务+日志回溯 |
| 库存超卖 | 悲观锁+分布式锁 |
| 订单丢失 | 消息队列+重试机制 |
| 物流数据延迟 | 异步更新+用户反馈修正 |
| 系统瘫痪 | 多机房部署+自动切换 |

---

## ✅ 成功标准与验收

### 功能完成度

| 模块 | 完成度 | 可用性 | 稳定性 |
|-----|-------|-------|-------|
| 用户等级 | 100% | >99% | 无已知bug |
| 云仓/本地仓 | 100% | >99% | 无已知bug |
| 积分流转 | 100% | >99% | 无已知bug |
| 订单管理 | 95% | >95% | <5个严重bug |
| 物流对接 | 80% | >90% | <10个已知bug |
| 数据统计 | 60% | >80% | <15个已知bug |

### 性能指标

| 指标 | 目标 |
|-----|------|
| 首屏加载时间 | <2s |
| API响应时间 | <500ms (P95) |
| 数据库查询 | <200ms (P95) |
| 订单创建到库存更新 | <500ms |
| 并发支持 | 10000+ DAU |

### 用户满意度

| 指标 | 目标 |
|-----|------|
| App评分 | >4.5分 |
| 功能易用性 | >80%用户反馈便捷 |
| 问题解决率 | 24小时内>90% |
| 故障响应时间 | <30分钟 |

---

## 📋 功能检查清单

### 店铺管理
- [ ] 云店等级系统（1-5星+董事）
- [ ] 等级自动升级检测
- [ ] 五通店一次性拿货
- [ ] 买10赠1奖励规则
- [ ] 权益递进显示

### 商品分类
- [ ] 五通均补分类
- [ ] 智能穿戴分类
- [ ] 会员专区分类
- [ ] 商品库存实时更新
- [ ] 库存预警机制

### 用户等级
- [ ] 普通→VIP转化
- [ ] VIP复购折扣
- [ ] 等级折扣计算正确
- [ ] 自动升级逻辑
- [ ] 降级保护规则

### 采购与仓储
- [ ] 采购权限管理
- [ ] 云仓库存管理
- [ ] 本地仓库存管理
- [ ] 采购记录追踪
- [ ] 提货记录追踪

### 积分与财务
- [ ] 积分充值功能（五星+）
- [ ] 积分转账功能
- [ ] 积分提现功能
- [ ] 财务记录查询
- [ ] 防欺诈规则

### 订单与物流
- [ ] 订单创建与管理
- [ ] 物流接口对接
- [ ] 物流实时追踪
- [ ] 退换货规则

### 数据统计
- [ ] 个人业绩统计
- [ ] 团队业绩统计
- [ ] 库存分析报表
- [ ] 自定义时间查询
- [ ] 报表导出功能

---

## 📞 联系与更新

**文档维护者**：产品团队
**最后更新**：2025年11月18日
**下次更新**：2025年12月18日
**问题反馈**：请联系产品经理

---

*本文档基于核心功能规划v1.2优化版和原版合并优化，确保功能完整性和全面性，为项目开发提供最终依据。*