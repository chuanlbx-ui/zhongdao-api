# 中道商城系统 - 环境配置模板
# 复制此文件为 .env.<environment> 并根据实际环境修改配置

# ===========================================
# 基础配置
# ===========================================
NODE_ENV=development
PORT=3000
DEBUG=true

# ===========================================
# 数据库配置 (开发环境使用Docker)
# ===========================================
DATABASE_URL="mysql://dev_user:dev_password_123@localhost:3307/zhongdao_mall_dev"

# 开发数据库详细配置
DB_HOST=localhost
DB_PORT=3307
DB_USER=dev_user
DB_PASSWORD=dev_password_123
DB_NAME=zhongdao_mall_dev

# 数据库连接池配置
DB_CONNECTION_LIMIT=20
DB_CONNECTION_TIMEOUT=60000
DB_ACQUIRE_TIMEOUT=60000

# ===========================================
# Redis缓存配置
# ===========================================
REDIS_URL="redis://localhost:6380"
REDIS_HOST=localhost
REDIS_PORT=6380
REDIS_PASSWORD=
REDIS_DB=1

# Redis连接配置
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_RETRY_ATTEMPTS=3

# ===========================================
# JWT认证配置
# ===========================================
JWT_SECRET=92f7087863c9e280a160ba4c2b5f9acc50925b5e64d8b9834c2a5a72c50e57972558a1d2104ccd54b3107785f47ada0582b158ac2cf23da093cb8a5da05bfb4a
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# JWT算法配置
JWT_ALGORITHM=HS256
JWT_ISSUER=zhongdao-mall
JWT_AUDIENCE=zhongdao-users

# ===========================================
# 微信小程序配置 (中道爱生活)
# ===========================================
# 微信小程序AppID和AppSecret
WECHAT_APP_ID=wx1ea1b1b0bf6bb19c
WECHAT_APP_SECRET=dd9a1e0b21c0dfb8614071f32bc61ded

# 微信登录配置
WECHAT_LOGIN_TIMEOUT=30000
WECHAT_TOKEN_EXPIRE=7200

# ===========================================
# 微信支付配置（中道科技（云南）有限公司）
# ===========================================
# 微信商户号和API密钥 (开发环境使用沙箱)
WECHAT_MCH_ID=1623525309
WECHAT_KEY=7fK9qR2pY5vX3zW8nB6cD1mH4gJ7sL9kT

# 微信支付API v3配置 (沙箱环境)
WECHAT_API_V3_KEY=zhongdao_mall_api_v3_key_32
WECHAT_API_SERIAL_NO=9A2A3A4B5C6D7E8E9A0B1C2D3E4F5A6B7C8D9E0F
WECHAT_API_CLIENT_CERT=
WECHAT_API_CLIENT_KEY=

# 微信支付沙箱模式
WECHAT_SANDBOX=true

# 支付回调URL (本地测试使用 ngrok 或其他内网穿透)
WECHAT_NOTIFY_URL=https://your-domain.com/api/v1/payments/wechat/notify
WECHAT_REFUND_NOTIFY_URL=https://your-domain.com/api/v1/payments/wechat/refund/notify

# API基础URL (用于回调地址)
API_BASE_URL=https://your-domain.com

# ===========================================
# 文件上传配置
# ===========================================
# 上传路径
UPLOAD_PATH=./uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx

# 云存储配置 (可选)
# 阿里云OSS
ALIYUN_OSS_REGION=oss-cn-hangzhou
ALIYUN_OSS_BUCKET=your-bucket-name
ALIYUN_OSS_ACCESS_KEY_ID=your_access_key_id
ALIYUN_OSS_ACCESS_KEY_SECRET=your_access_key_secret

# 腾讯云COS
TENCENT_COS_REGION=ap-beijing
TENCENT_COS_BUCKET=your-bucket-name
TENCENT_COS_SECRET_ID=your_secret_id
TENCENT_COS_SECRET_KEY=your_secret_key

# ===========================================
# 邮件服务配置
# ===========================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=chuanlbx@gmail.com
SMTP_PASS=simonYC6531))

# 邮件发件人信息
EMAIL_FROM=noreply@zhongdao-mall.com
EMAIL_FROM_NAME=中道商城

# ===========================================
# 短信服务配置
# ===========================================
# 阿里云短信
ALIYUN_SMS_ACCESS_KEY_ID=your_access_key_id
ALIYUN_SMS_ACCESS_KEY_SECRET=your_access_key_secret
ALIYUN_SMS_SIGN_NAME=中道商城
ALIYUN_SMS_TEMPLATE_CODE=SMS_123456789

# 腾讯云短信
TENCENT_SMS_SECRET_ID=your_secret_id
TENCENT_SMS_SECRET_KEY=your_secret_key
TENCENT_SMS_SDK_APP_ID=your_sdk_app_id
TENCENT_SMS_SIGN_NAME=中道商城

# ===========================================
# 日志配置
# ===========================================
# 日志级别: error, warn, info, debug
LOG_LEVEL=info
LOG_FILE=./logs/app.log

# 日志轮转配置
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5
LOG_DATE_PATTERN=YYYY-MM-DD

# ===========================================
# 安全配置
# ===========================================
# CORS配置
CORS_ORIGIN=http://localhost:3000,http://localhost:8080
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization

# 限流配置
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# IP白名单 (生产环境建议启用)
IP_WHITELIST=127.0.0.1,::1

# ===========================================
# 监控配置
# ===========================================
# 健康检查配置
HEALTH_CHECK_INTERVAL=30000

# 性能监控
ENABLE_PERFORMANCE_MONITORING=true
PERFORMANCE_SAMPLE_RATE=0.1

# 错误监控
ENABLE_ERROR_MONITORING=true
ERROR_NOTIFICATION_WEBHOOK=https://your-webhook-url.com/error

# ===========================================
# 业务配置
# ===========================================
# 佣金配置
COMMISSION_CALCULATION_ENABLED=true
COMMISSION_SETTLEMENT_DAY=1

# 积分配置
POINTS_TRANSFER_ENABLED=true
POINTS_MIN_TRANSFER_AMOUNT=1
POINTS_MAX_TRANSFER_AMOUNT=100000
POINTS_DAILY_TRANSFER_LIMIT=1000000

# 订单配置
ORDER_AUTO_CANCEL_MINUTES=30
ORDER_REFUND_DAYS=7

# 库存配置
INVENTORY_WARNING_THRESHOLD=10
INVENTORY_AUTO_REORDER_ENABLED=false

# ===========================================
# 第三方服务配置
# ===========================================
# 物流服务
LOGISTICS_PROVIDER=express
EXPRESS_APP_KEY=your_express_app_key
EXPRESS_CUSTOMER_CODE=your_customer_code

# 地图服务
MAP_AMAP_KEY=your_amap_key
MAP_AMAP_SECRET=your_amap_secret

# ===========================================
# 开发环境专用配置
# ===========================================
# 开发环境特殊配置
ENABLE_CORS=true
ENABLE_SWAGGER=true
ENABLE_MOCK_DATA=false
ENABLE_DEBUG_LOGS=true

# 开发数据库配置 (开发环境可覆盖)
DEV_DB_HOST=localhost
DEV_DB_PORT=3307
DEV_DB_USER=dev_user
DEV_DB_PASSWORD=dev_password_123
DEV_DB_NAME=zhongdao_mall_dev

# 开发Redis配置
DEV_REDIS_HOST=localhost
DEV_REDIS_PORT=6380
DEV_REDIS_DB=0

# ===========================================
# 生产环境专用配置
# ===========================================
# 生产环境安全配置
PROD_ENABLE_HTTPS=true
PROD_SSL_CERT_PATH=./certs/server.crt
PROD_SSL_KEY_PATH=./certs/server.key

# 生产环境性能配置
PROD_ENABLE_COMPRESSION=true
PROD_ENABLE_CACHE=true
PROD_CACHE_TTL=3600

# 生产环境监控配置
PROD_ENABLE_METRICS=true
PROD_METRICS_PORT=9090